{
  "version": 3,
  "sources": ["../../@deck.gl/react/src/deckgl.ts", "../../@deck.gl/react/src/utils/use-isomorphic-layout-effect.ts", "../../@deck.gl/react/src/utils/extract-jsx-layers.ts", "../../@deck.gl/react/src/utils/inherits-from.ts", "../../@deck.gl/react/src/utils/evaluate-children.ts", "../../@deck.gl/react/src/utils/position-children-under-views.ts", "../../@deck.gl/react/src/utils/deckgl-context.ts", "../../@deck.gl/react/src/utils/extract-styles.ts", "../../preact/src/constants.js", "../../preact/src/util.js", "../../preact/src/options.js", "../../preact/src/create-element.js", "../../preact/src/component.js", "../../preact/src/diff/props.js", "../../preact/src/create-context.js", "../../preact/src/diff/children.js", "../../preact/src/diff/index.js", "../../preact/src/render.js", "../../preact/src/clone-element.js", "../../preact/src/diff/catch-error.js", "../../preact/jsx-runtime/src/utils.js", "../../preact/src/constants.js", "../../preact/jsx-runtime/src/index.js", "../../@deck.gl/widgets/src/lib/components/button-group.tsx", "../../@deck.gl/widgets/src/lib/components/grouped-icon-button.tsx", "../../@deck.gl/widgets/src/zoom-widget.tsx", "../../@deck.gl/widgets/src/lib/components/icon-button.tsx", "../../@deck.gl/widgets/src/reset-view-widget.tsx", "../../@deck.gl/widgets/src/gimbal-widget.tsx", "../../@deck.gl/widgets/src/compass-widget.tsx", "../../@deck.gl/widgets/src/scale-widget.tsx", "../../preact/hooks/src/index.js", "../../@deck.gl/widgets/src/lib/components/dropdown-menu.tsx", "../../@deck.gl/widgets/src/lib/geocode/geocoder-history.ts", "../../@deck.gl/widgets/src/lib/geocode/geocoders.ts", "../../@deck.gl/widgets/src/geocoder-widget.tsx", "../../@deck.gl/widgets/src/fullscreen-widget.tsx", "../../@deck.gl/widgets/src/splitter-widget.tsx", "../../@deck.gl/widgets/src/lib/components/icon-menu.tsx", "../../@deck.gl/widgets/src/view-selector-widget.tsx", "../../@deck.gl/widgets/src/info-widget.tsx", "../../@deck.gl/widgets/src/lib/components/simple-menu.tsx", "../../@deck.gl/widgets/src/context-menu-widget.tsx", "../../@deck.gl/widgets/src/timeline-widget.tsx", "../../@deck.gl/widgets/src/screenshot-widget.tsx", "../../@deck.gl/widgets/src/themes.ts", "../../@deck.gl/widgets/src/theme-widget.tsx", "../../@deck.gl/widgets/src/loading-widget.tsx", "../../@deck.gl/widgets/src/fps-widget.tsx", "../../@deck.gl/widgets/src/stats-widget.tsx", "../../@deck.gl/react/src/utils/use-widget.ts", "../../@deck.gl/react/src/widgets/compass-widget.tsx", "../../@deck.gl/react/src/widgets/fullscreen-widget.tsx", "../../@deck.gl/react/src/widgets/zoom-widget.tsx", "../../@deck.gl/react/src/widgets/geocoder-widget.tsx", "../../@deck.gl/react/src/widgets/info-widget.tsx", "../../@deck.gl/react/src/widgets/context-menu-widget.tsx", "../../@deck.gl/react/src/widgets/loading-widget.tsx", "../../@deck.gl/react/src/widgets/reset-view-widget.tsx", "../../@deck.gl/react/src/widgets/scale-widget.tsx", "../../@deck.gl/react/src/widgets/screenshot-widget.tsx", "../../@deck.gl/react/src/widgets/splitter-widget.tsx", "../../@deck.gl/react/src/widgets/theme-widget.tsx"],
  "sourcesContent": ["// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport * as React from 'react';\nimport {createElement, useRef, useState, useMemo, useEffect, useImperativeHandle} from 'react';\nimport {Deck} from '@deck.gl/core';\nimport useIsomorphicLayoutEffect from './utils/use-isomorphic-layout-effect';\n\nimport extractJSXLayers, {DeckGLRenderCallback} from './utils/extract-jsx-layers';\nimport positionChildrenUnderViews from './utils/position-children-under-views';\nimport extractStyles from './utils/extract-styles';\n\nimport type {DeckGLContextValue} from './utils/deckgl-context';\nimport type {DeckProps, View, Viewport} from '@deck.gl/core';\n\nexport type ViewOrViews = View | View[] | null;\n\n/* eslint-disable max-statements, accessor-pairs */\ntype DeckInstanceRef<ViewsT extends ViewOrViews> = {\n  deck?: Deck<ViewsT>;\n  redrawReason?: string | null;\n  lastRenderedViewports?: Viewport[];\n  viewStateUpdateRequested?: any;\n  interactionStateUpdateRequested?: any;\n  forceUpdate: () => void;\n  version: number;\n  control: React.ReactHTMLElement<HTMLElement> | null;\n};\n\n// Remove prop types in the base Deck class that support externally supplied canvas/WebGLContext\n/** DeckGL React component props */\nexport type DeckGLProps<ViewsT extends ViewOrViews = null> = Omit<\n  DeckProps<ViewsT>,\n  'width' | 'height' | 'gl' | 'parent' | 'canvas' | '_customRender'\n> & {\n  Deck?: typeof Deck;\n  width?: string | number;\n  height?: string | number;\n  children?: React.ReactNode | DeckGLRenderCallback;\n  ref?: React.Ref<DeckGLRef<ViewsT>>;\n  ContextProvider?: React.Context<DeckGLContextValue>['Provider'];\n};\n\nexport type DeckGLRef<ViewsT extends ViewOrViews = null> = {\n  deck?: Deck<ViewsT>;\n  pickObject: Deck['pickObject'];\n  pickObjects: Deck['pickObjects'];\n  pickMultipleObjects: Deck['pickMultipleObjects'];\n};\n\nfunction getRefHandles<ViewsT extends ViewOrViews>(\n  thisRef: DeckInstanceRef<ViewsT>\n): DeckGLRef<ViewsT> {\n  return {\n    get deck() {\n      return thisRef.deck;\n    },\n    // The following method can only be called after ref is available, by which point deck is defined in useEffect\n    pickObject: opts => thisRef.deck!.pickObject(opts),\n    pickMultipleObjects: opts => thisRef.deck!.pickMultipleObjects(opts),\n    pickObjects: opts => thisRef.deck!.pickObjects(opts)\n  };\n}\n\nfunction redrawDeck(thisRef: DeckInstanceRef<any>) {\n  if (thisRef.redrawReason) {\n    // Only redraw if we have received a dirty flag\n    // @ts-expect-error accessing protected method\n    thisRef.deck._drawLayers(thisRef.redrawReason);\n    thisRef.redrawReason = null;\n  }\n}\n\nfunction createDeckInstance<ViewsT extends ViewOrViews>(\n  thisRef: DeckInstanceRef<ViewsT>,\n  DeckClass: typeof Deck,\n  props: DeckProps<ViewsT>\n): Deck<ViewsT> {\n  const deck = new DeckClass({\n    ...props,\n    // The Deck's animation loop is independent from React's render cycle, causing potential\n    // synchronization issues. We provide this custom render function to make sure that React\n    // and Deck update on the same schedule.\n    // TODO(ibgreen) - Hack to enable WebGPU as it needs to render quickly to avoid CanvasContext texture from going stale\n    _customRender:\n      props.deviceProps?.adapters?.[0]?.type === 'webgpu'\n        ? undefined\n        : redrawReason => {\n            // Save the dirty flag for later\n            thisRef.redrawReason = redrawReason;\n\n            // Viewport/view state is passed to child components as props.\n            // If they have changed, we need to trigger a React rerender to update children props.\n            const viewports = deck.getViewports();\n            if (thisRef.lastRenderedViewports !== viewports) {\n              // Viewports have changed, update children props first.\n              // This will delay the Deck canvas redraw till after React update (in useLayoutEffect)\n              // so that the canvas does not get rendered before the child components update.\n              thisRef.forceUpdate();\n            } else {\n              redrawDeck(thisRef);\n            }\n          }\n  });\n  return deck;\n}\n\nfunction DeckGLWithRef<ViewsT extends ViewOrViews = null>(\n  props: DeckGLProps<ViewsT>,\n  ref: React.Ref<DeckGLRef<ViewsT>>\n) {\n  // A mechanism to force redraw\n  const [version, setVersion] = useState(0);\n  // A reference to persistent states\n  const _thisRef = useRef<DeckInstanceRef<ViewsT>>({\n    control: null,\n    version,\n    forceUpdate: () => setVersion(v => v + 1)\n  });\n  const thisRef = _thisRef.current;\n  // DOM refs\n  const containerRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  // extract any deck.gl layers masquerading as react elements from props.children\n  const jsxProps = useMemo(\n    () => extractJSXLayers(props),\n    [props.layers, props.views, props.children]\n  );\n\n  // Callbacks\n  let inRender = true;\n\n  const handleViewStateChange: DeckProps<ViewsT>['onViewStateChange'] = params => {\n    if (inRender && props.viewState) {\n      // Callback may invoke a state update. Defer callback to after render() to avoid React error\n      // In React StrictMode, render is executed twice and useEffect/useLayoutEffect is executed once\n      // Store deferred parameters in ref so that we can access it in another render\n      thisRef.viewStateUpdateRequested = params;\n      return null;\n    }\n    thisRef.viewStateUpdateRequested = null;\n    return props.onViewStateChange?.(params);\n  };\n\n  const handleInteractionStateChange: DeckProps<ViewsT>['onInteractionStateChange'] = params => {\n    if (inRender) {\n      // Callback may invoke a state update. Defer callback to after render() to avoid React error\n      // In React StrictMode, render is executed twice and useEffect/useLayoutEffect is executed once\n      // Store deferred parameters in ref so that we can access it in another render\n      thisRef.interactionStateUpdateRequested = params;\n    } else {\n      thisRef.interactionStateUpdateRequested = null;\n      props.onInteractionStateChange?.(params);\n    }\n  };\n\n  // Update Deck's props. If Deck needs redraw, this will trigger a call to `_customRender` in\n  // the next animation frame.\n  // Needs to be called both from initial mount, and when new props are received\n  const deckProps = useMemo(() => {\n    const forwardProps: DeckProps<ViewsT> = {\n      widgets: [],\n      ...props,\n      // Override user styling props. We will set the canvas style in render()\n      style: null,\n      width: '100%',\n      height: '100%',\n      parent: containerRef.current,\n      canvas: canvasRef.current,\n      layers: jsxProps.layers,\n      views: jsxProps.views as ViewsT,\n      onViewStateChange: handleViewStateChange,\n      onInteractionStateChange: handleInteractionStateChange\n    };\n\n    // The defaultValue for _customRender is null, which would overwrite the definition\n    // of _customRender. Remove to avoid frequently redeclaring the method here.\n    delete forwardProps._customRender;\n\n    if (thisRef.deck) {\n      thisRef.deck.setProps(forwardProps);\n    }\n\n    return forwardProps;\n  }, [props]);\n\n  useEffect(() => {\n    const DeckClass = props.Deck || Deck;\n\n    thisRef.deck = createDeckInstance(thisRef, DeckClass, {\n      ...deckProps,\n      parent: containerRef.current,\n      canvas: canvasRef.current\n    });\n\n    return () => thisRef.deck?.finalize();\n  }, []);\n\n  useIsomorphicLayoutEffect(() => {\n    // render has just been called. The children are positioned based on the current view state.\n    // Redraw Deck canvas immediately, if necessary, using the current view state, so that it\n    // matches the child components.\n    redrawDeck(thisRef);\n\n    // Execute deferred callbacks\n    const {viewStateUpdateRequested, interactionStateUpdateRequested} = thisRef;\n    if (viewStateUpdateRequested) {\n      handleViewStateChange(viewStateUpdateRequested);\n    }\n    if (interactionStateUpdateRequested) {\n      handleInteractionStateChange(interactionStateUpdateRequested);\n    }\n\n    // Force initial render if Deck is initialized\n    if (thisRef.deck?.isInitialized) {\n      thisRef.deck.redraw('Initial render');\n    }\n  });\n\n  useImperativeHandle(ref, () => getRefHandles(thisRef), []);\n\n  const currentViewports =\n    thisRef.deck && thisRef.deck.isInitialized ? thisRef.deck.getViewports() : undefined;\n\n  const {ContextProvider, width = '100%', height = '100%', id, style} = props;\n\n  const {containerStyle, canvasStyle} = useMemo(\n    () => extractStyles({width, height, style}),\n    [width, height, style]\n  );\n\n  // Props changes may lead to 3 types of updates:\n  // 1. Only the WebGL canvas - updated in Deck's render cycle (next animation frame)\n  // 2. Only the DOM - updated in React's lifecycle (now)\n  // 3. Both the WebGL canvas and the DOM - defer React rerender to next animation frame just\n  //    before Deck redraw to ensure perfect synchronization & avoid excessive redraw\n  //    This is because multiple changes may happen to Deck between two frames e.g. transition\n  if (\n    (!thisRef.viewStateUpdateRequested && thisRef.lastRenderedViewports === currentViewports) || // case 2\n    thisRef.version !== version // case 3 just before deck redraws\n  ) {\n    thisRef.lastRenderedViewports = currentViewports;\n    thisRef.version = version;\n\n    // Render the background elements (typically react-map-gl instances)\n    // using the view descriptors\n    const childrenUnderViews = positionChildrenUnderViews({\n      children: jsxProps.children,\n      deck: thisRef.deck,\n      ContextProvider\n    });\n\n    const canvas = createElement('canvas', {\n      key: 'canvas',\n      id: id || 'deckgl-overlay',\n      ref: canvasRef,\n      style: canvasStyle\n    });\n\n    // Render deck.gl as the last child\n    thisRef.control = createElement(\n      'div',\n      {id: `${id || 'deckgl'}-wrapper`, ref: containerRef, style: containerStyle},\n      [canvas, childrenUnderViews]\n    );\n  }\n\n  inRender = false;\n  return thisRef.control;\n}\n\nconst DeckGL = React.forwardRef(DeckGLWithRef) as <ViewsT extends ViewOrViews>(\n  props: DeckGLProps<ViewsT>\n) => React.ReactElement;\n\nexport default DeckGL;\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\n// From https://github.com/streamich/react-use/blob/master/src/useIsomorphicLayoutEffect.ts\n// useLayoutEffect but does not trigger warning in server-side rendering\nimport {useEffect, useLayoutEffect} from 'react';\n\nconst useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\n\nexport default useIsomorphicLayoutEffect;\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport * as React from 'react';\nimport {createElement} from 'react';\nimport {inheritsFrom} from './inherits-from';\nimport {Layer, View} from '@deck.gl/core';\nimport {isComponent} from './evaluate-children';\nimport type {LayersList, Viewport} from '@deck.gl/core';\n\nexport type DeckGLRenderCallbackArgs = {\n  /**\n   * the left offset of the current view, in pixels\n   */\n  x: number;\n  /**\n   * the top offset of the current view, in pixels\n   */\n  y: number;\n  /**\n   * the width of the current view, in pixels\n   */\n  width: number;\n  /**\n   * the height of the current view, in pixels\n   */\n  height: number;\n  /**\n   * the view state of the current view\n   */\n  viewState: any;\n  /**\n   * the `Viewport` instance of the current view\n   */\n  viewport: Viewport;\n};\n\nexport type DeckGLRenderCallback = (args: DeckGLRenderCallbackArgs) => React.ReactNode;\n\n// recursively wrap render callbacks in `View`\nfunction wrapInView(node: React.ReactNode | DeckGLRenderCallback): React.ReactNode {\n  if (typeof node === 'function') {\n    // React.Children does not traverse functions.\n    // All render callbacks must be protected under a <View>\n    // @ts-expect-error View is not a ReactJSXElement constructor. Only used as a temporary wrapper and will be removed in extractJSXLayers\n    return createElement(View, {}, node);\n  }\n  if (Array.isArray(node)) {\n    return node.map(wrapInView);\n  }\n  if (isComponent(node)) {\n    if (node.type === React.Fragment) {\n      return wrapInView(node.props.children);\n    }\n    if (inheritsFrom(node.type, View)) {\n      return node;\n    }\n  }\n  return node;\n}\n\n// extracts any deck.gl layers masquerading as react elements from props.children\nexport default function extractJSXLayers({\n  children,\n  layers = [],\n  views = null\n}: {\n  children?: React.ReactNode | DeckGLRenderCallback;\n  layers?: LayersList;\n  views?: View | View[] | null;\n}): {\n  children: React.ReactNode[];\n  layers: LayersList;\n  views: View | View[] | null;\n} {\n  const reactChildren: React.ReactNode[] = []; // extract real react elements (i.e. not deck.gl layers)\n  const jsxLayers: LayersList = []; // extracted layer from react children, will add to deck.gl layer array\n  const jsxViews: Record<string, View> = {};\n\n  // React.children\n  React.Children.forEach(wrapInView(children), reactElement => {\n    if (isComponent(reactElement)) {\n      // For some reason Children.forEach doesn't filter out `null`s\n      const ElementType = reactElement.type;\n      if (inheritsFrom(ElementType, Layer)) {\n        const layer = createLayer(ElementType, reactElement.props);\n        jsxLayers.push(layer);\n      } else {\n        reactChildren.push(reactElement);\n      }\n\n      // empty id => default view\n      if (inheritsFrom(ElementType, View) && ElementType !== View && reactElement.props.id) {\n        // @ts-ignore Cannot instantiate an abstract class (View)\n        const view = new ElementType(reactElement.props);\n        jsxViews[view.id] = view;\n      }\n    } else if (reactElement) {\n      reactChildren.push(reactElement);\n    }\n  });\n\n  // Avoid modifying views if no JSX views were found\n  if (Object.keys(jsxViews).length > 0) {\n    // If a view is specified in both views prop and JSX, use the one in views\n    if (Array.isArray(views)) {\n      views.forEach(view => {\n        jsxViews[view.id] = view;\n      });\n    } else if (views) {\n      jsxViews[views.id] = views;\n    }\n    views = Object.values(jsxViews);\n  }\n\n  // Avoid modifying layers array if no JSX layers were found\n  layers = jsxLayers.length > 0 ? [...jsxLayers, ...layers] : layers;\n\n  return {layers, children: reactChildren, views};\n}\n\nfunction createLayer(LayerType: typeof Layer, reactProps: any): Layer {\n  const props = {};\n  // Layer.defaultProps is treated as ReactElement.defaultProps and merged into react props\n  // Remove them\n  const defaultProps = LayerType.defaultProps || {};\n  for (const key in reactProps) {\n    if (defaultProps[key] !== reactProps[key]) {\n      props[key] = reactProps[key];\n    }\n  }\n  // @ts-ignore Cannot instantiate an abstract class (Layer)\n  return new LayerType(props);\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\n// Check if one JavaScript class inherits from another\nexport function inheritsFrom<T>(Type: any, ParentType: T): Type is T {\n  while (Type) {\n    if (Type === ParentType) {\n      return true;\n    }\n    Type = Object.getPrototypeOf(Type);\n  }\n  return false;\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport * as React from 'react';\nimport {cloneElement} from 'react';\n\nconst MAP_STYLE = {position: 'absolute', zIndex: -1};\n\nexport default function evaluateChildren(\n  children: React.ReactNode | Function,\n  childProps: any\n): React.ReactNode {\n  if (typeof children === 'function') {\n    return children(childProps);\n  }\n  if (Array.isArray(children)) {\n    return children.map(child => evaluateChildren(child, childProps));\n  }\n  if (isComponent(children)) {\n    // Special treatment for react-map-gl's Map component\n    // to support shorthand use case <DeckGL><StaticMap /></DeckGL>\n    if (isReactMap(children)) {\n      // Place map under the canvas\n      childProps.style = MAP_STYLE;\n      return cloneElement(children, childProps);\n    }\n    if (needsDeckGLViewProps(children)) {\n      return cloneElement(children, childProps);\n    }\n  }\n\n  return children;\n}\n\nexport function isComponent(child: React.ReactNode): child is React.ReactElement {\n  return (child && typeof child === 'object' && 'type' in child) || false;\n}\n\nfunction isReactMap(child: React.ReactElement): boolean {\n  return child.props?.mapStyle;\n}\n\nfunction needsDeckGLViewProps(child: React.ReactElement): boolean {\n  const componentClass = child.type;\n  // @ts-expect-error deckGLViewProps is a custom hack defined on the constructor (nebula.gl)\n  return componentClass && componentClass.deckGLViewProps;\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport * as React from 'react';\nimport {createElement} from 'react';\nimport {View} from '@deck.gl/core';\nimport {inheritsFrom} from './inherits-from';\nimport evaluateChildren, {isComponent} from './evaluate-children';\n\nimport type {ViewOrViews} from '../deckgl';\nimport type {Deck, Viewport} from '@deck.gl/core';\nimport {DeckGlContext, type DeckGLContextValue} from './deckgl-context';\n\n// Iterate over views and reposition children associated with views\n// TODO - Can we supply a similar function for the non-React case?\nexport default function positionChildrenUnderViews<ViewsT extends ViewOrViews>({\n  children,\n  deck,\n  ContextProvider = DeckGlContext.Provider\n}: {\n  children: React.ReactNode[];\n  deck?: Deck<ViewsT>;\n  ContextProvider?: React.Context<DeckGLContextValue>['Provider'];\n}): React.ReactNode[] {\n  // @ts-expect-error accessing protected property\n  const {viewManager} = deck || {};\n\n  if (!viewManager || !viewManager.views.length) {\n    return [];\n  }\n\n  const views: Record<\n    string,\n    {\n      viewport: Viewport;\n      children: React.ReactNode[];\n    }\n  > = {};\n  const defaultViewId = (viewManager.views[0] as View).id;\n\n  // Sort children by view id\n  for (const child of children) {\n    // Unless child is a View, position / render as part of the default view\n    let viewId = defaultViewId;\n    let viewChildren = child;\n\n    if (isComponent(child) && inheritsFrom(child.type, View)) {\n      viewId = child.props.id || defaultViewId;\n      viewChildren = child.props.children;\n    }\n\n    const viewport = viewManager.getViewport(viewId) as Viewport;\n    const viewState = viewManager.getViewState(viewId);\n\n    // Drop (auto-hide) elements with viewId that are not matched by any current view\n    if (viewport) {\n      viewState.padding = viewport.padding;\n      const {x, y, width, height} = viewport;\n      // Resolve potentially relative dimensions using the deck.gl container size\n      viewChildren = evaluateChildren(viewChildren, {\n        x,\n        y,\n        width,\n        height,\n        viewport,\n        viewState\n      });\n\n      if (!views[viewId]) {\n        views[viewId] = {\n          viewport,\n          children: []\n        };\n      }\n      views[viewId].children.push(viewChildren);\n    }\n  }\n\n  // Render views\n  return Object.keys(views).map(viewId => {\n    const {viewport, children: viewChildren} = views[viewId];\n    const {x, y, width, height} = viewport;\n    const style = {\n      position: 'absolute',\n      left: x,\n      top: y,\n      width,\n      height\n    };\n\n    const key = `view-${viewId}`;\n    // If children is passed as an array, React will throw the \"each element in a list needs\n    // a key\" warning. Sending each child as separate arguments removes this requirement.\n    const viewElement = createElement('div', {key, id: key, style}, ...viewChildren);\n\n    const contextValue: DeckGLContextValue = {\n      deck,\n      viewport,\n      // @ts-expect-error accessing protected property\n      container: deck.canvas.offsetParent,\n      // @ts-expect-error accessing protected property\n      eventManager: deck.eventManager,\n      onViewStateChange: params => {\n        params.viewId = viewId;\n        // @ts-expect-error accessing protected method\n        deck._onViewStateChange(params);\n      },\n      widgets: []\n    };\n    const providerKey = `view-${viewId}-context`;\n    return createElement(ContextProvider, {key: providerKey, value: contextValue}, viewElement);\n  });\n}\n", "import {createContext} from 'react';\nimport type {EventManager} from 'mjolnir.js';\nimport type {Deck, DeckProps, Viewport, Widget} from '@deck.gl/core';\n\nexport type DeckGLContextValue = {\n  viewport: Viewport;\n  container: HTMLElement;\n  eventManager: EventManager;\n  onViewStateChange: DeckProps['onViewStateChange'];\n  deck?: Deck<any>;\n  widgets?: Widget[];\n};\n\n// @ts-ignore\nexport const DeckGlContext = createContext<DeckGLContextValue>();\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport * as React from 'react';\n\nconst CANVAS_ONLY_STYLES = {\n  mixBlendMode: null\n};\n\nexport default function extractStyles({\n  width,\n  height,\n  style\n}: {\n  width?: string | number;\n  height?: string | number;\n  style?: Partial<CSSStyleDeclaration> | null;\n}): {\n  containerStyle: React.CSSProperties;\n  canvasStyle: React.CSSProperties;\n} {\n  // This styling is enforced for correct positioning with children\n  const containerStyle: React.CSSProperties = {\n    position: 'absolute',\n    zIndex: 0,\n    left: 0,\n    top: 0,\n    width,\n    height\n  };\n\n  // Fill the container\n  const canvasStyle: React.CSSProperties = {\n    left: 0,\n    top: 0\n  };\n\n  if (style) {\n    for (const key in style) {\n      if (key in CANVAS_ONLY_STYLES) {\n        // apply style to the canvas, but not deck's children, e.g. mix-blend-mode\n        canvasStyle[key] = style[key];\n      } else {\n        // apply style to the container, e.g. position/flow settings\n        containerStyle[key] = style[key];\n      }\n    }\n  }\n\n  return {containerStyle, canvasStyle};\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-expect-error We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {import('./index').ContainerNode} node The node to remove\n */\nexport function removeNode(node) {\n\tif (node && node.parentNode) node.parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n", "import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n", "import { slice } from './util';\nimport options from './options';\nimport { NULL, UNDEFINED } from './constants';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor for this\n * virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the\n * virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != NULL) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === UNDEFINED) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, NULL);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\t/** @type {import('./internal').VNode} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: NULL,\n\t\t_parent: NULL,\n\t\t_depth: 0,\n\t\t_dom: NULL,\n\t\t_component: NULL,\n\t\tconstructor: UNDEFINED,\n\t\t_original: original == NULL ? ++vnodeId : original,\n\t\t_index: -1,\n\t\t_flags: 0\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == NULL && options.vnode != NULL) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: NULL };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != NULL && vnode.constructor === UNDEFINED;\n", "import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\nimport { MODE_HYDRATE, NULL } from './constants';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function BaseComponent(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nBaseComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != NULL && this._nextState != this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == NULL) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nBaseComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](https://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {ComponentChildren | void}\n */\nBaseComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == NULL) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._index + 1)\n\t\t\t: NULL;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != NULL && sibling._dom != NULL) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : NULL;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet oldVNode = component._vnode,\n\t\toldDom = oldVNode._dom,\n\t\tcommitQueue = [],\n\t\trefQueue = [];\n\n\tif (component._parentDom) {\n\t\tconst newVNode = assign({}, oldVNode);\n\t\tnewVNode._original = oldVNode._original + 1;\n\t\tif (options.vnode) options.vnode(newVNode);\n\n\t\tdiff(\n\t\t\tcomponent._parentDom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tcomponent._parentDom.namespaceURI,\n\t\t\toldVNode._flags & MODE_HYDRATE ? [oldDom] : NULL,\n\t\t\tcommitQueue,\n\t\t\toldDom == NULL ? getDomSibling(oldVNode) : oldDom,\n\t\t\t!!(oldVNode._flags & MODE_HYDRATE),\n\t\t\trefQueue\n\t\t);\n\n\t\tnewVNode._original = oldVNode._original;\n\t\tnewVNode._parent._children[newVNode._index] = newVNode;\n\t\tcommitRoot(commitQueue, newVNode, refQueue);\n\t\toldVNode._dom = oldVNode._parent = null;\n\n\t\tif (newVNode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(newVNode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != NULL && vnode._component != NULL) {\n\t\tvnode._dom = vnode._component.base = NULL;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != NULL && child._dom != NULL) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce != options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {import('./internal').Component} a\n * @param {import('./internal').Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c,\n\t\tl = 1;\n\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile (rerenderQueue.length) {\n\t\t// Keep the rerender queue sorted by (depth, insertion order). The queue\n\t\t// will initially be sorted on the first iteration only if it has more than 1 item.\n\t\t//\n\t\t// New items can be added to the queue e.g. when rerendering a provider, so we want to\n\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t// single pass\n\t\tif (rerenderQueue.length > l) {\n\t\t\trerenderQueue.sort(depthSort);\n\t\t}\n\n\t\tc = rerenderQueue.shift();\n\t\tl = rerenderQueue.length;\n\n\t\tif (c._dirty) {\n\t\t\trenderComponent(c);\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n", "import { IS_NON_DIMENSIONAL, NULL, SVG_NAMESPACE } from '../constants';\nimport options from '../options';\n\nfunction setStyle(style, key, value) {\n\tif (key[0] == '-') {\n\t\tstyle.setProperty(key, value == NULL ? '' : value);\n\t} else if (value == NULL) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\nconst CAPTURE_REGEX = /(PointerCapture)$|Capture$/i;\n\n// A logical clock to solve issues like https://github.com/preactjs/preact/issues/3927.\n// When the DOM performs an event it leaves micro-ticks in between bubbling up which means that\n// an event can trigger on a newly reated DOM-node while the event bubbles up.\n//\n// Originally inspired by Vue\n// (https://github.com/vuejs/core/blob/caeb8a68811a1b0f79/packages/runtime-dom/src/modules/events.ts#L90-L101),\n// but modified to use a logical clock instead of Date.now() in case event handlers get attached\n// and events get dispatched during the same millisecond.\n//\n// The clock is incremented after each new event dispatch. This allows 1 000 000 new events\n// per second for over 280 years before the value reaches Number.MAX_SAFE_INTEGER (2**53 - 1).\nlet eventClock = 0;\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {string} namespace Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, namespace) {\n\tlet useCapture;\n\n\to: if (name == 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] != oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] == 'o' && name[1] == 'n') {\n\t\tuseCapture = name != (name = name.replace(CAPTURE_REGEX, '$1'));\n\t\tconst lowerCaseName = name.toLowerCase();\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (lowerCaseName in dom || name == 'onFocusOut' || name == 'onFocusIn')\n\t\t\tname = lowerCaseName.slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tvalue._attached = eventClock;\n\t\t\t\tdom.addEventListener(\n\t\t\t\t\tname,\n\t\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\t\tuseCapture\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvalue._attached = oldValue._attached;\n\t\t\t}\n\t\t} else {\n\t\t\tdom.removeEventListener(\n\t\t\t\tname,\n\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\tuseCapture\n\t\t\t);\n\t\t}\n\t} else {\n\t\tif (namespace == SVG_NAMESPACE) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname != 'width' &&\n\t\t\tname != 'height' &&\n\t\t\tname != 'href' &&\n\t\t\tname != 'list' &&\n\t\t\tname != 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname != 'tabIndex' &&\n\t\t\tname != 'download' &&\n\t\t\tname != 'rowSpan' &&\n\t\t\tname != 'colSpan' &&\n\t\t\tname != 'role' &&\n\t\t\tname != 'popover' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == NULL ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value == 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != NULL && (value !== false || name[4] == '-')) {\n\t\t\tdom.setAttribute(name, name == 'popover' && value == true ? '' : value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Create an event proxy function.\n * @param {boolean} useCapture Is the event handler for the capture phase.\n * @private\n */\nfunction createEventProxy(useCapture) {\n\t/**\n\t * Proxy an event to hooked event handlers\n\t * @param {import('../internal').PreactEvent} e The event object from the browser\n\t * @private\n\t */\n\treturn function (e) {\n\t\tif (this._listeners) {\n\t\t\tconst eventHandler = this._listeners[e.type + useCapture];\n\t\t\tif (e._dispatched == NULL) {\n\t\t\t\te._dispatched = eventClock++;\n\n\t\t\t\t// When `e._dispatched` is smaller than the time when the targeted event\n\t\t\t\t// handler was attached we know we have bubbled up to an element that was added\n\t\t\t\t// during patching the DOM.\n\t\t\t} else if (e._dispatched < eventHandler._attached) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn eventHandler(options.event ? options.event(e) : e);\n\t\t}\n\t};\n}\n\nconst eventProxy = createEventProxy(false);\nconst eventProxyCapture = createEventProxy(true);\n", "import { enqueueRender } from './component';\nimport { NULL } from './constants';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tfunction Context(props) {\n\t\tif (!this.getChildContext) {\n\t\t\t/** @type {Set<import('./internal').Component> | null} */\n\t\t\tlet subs = new Set();\n\t\t\tlet ctx = {};\n\t\t\tctx[Context._id] = this;\n\n\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\tthis.componentWillUnmount = () => {\n\t\t\t\tsubs = NULL;\n\t\t\t};\n\n\t\t\tthis.shouldComponentUpdate = function (_props) {\n\t\t\t\t// @ts-expect-error even\n\t\t\t\tif (this.props.value != _props.value) {\n\t\t\t\t\tsubs.forEach(c => {\n\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.sub = c => {\n\t\t\t\tsubs.add(c);\n\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\tif (subs) {\n\t\t\t\t\t\tsubs.delete(c);\n\t\t\t\t\t}\n\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\n\t\treturn props.children;\n\t}\n\n\tContext._id = '__cC' + i++;\n\tContext._defaultValue = defaultValue;\n\n\t/** @type {import('./internal').FunctionComponent} */\n\tContext.Consumer = (props, contextValue) => {\n\t\treturn props.children(contextValue);\n\t};\n\n\t// we could also get rid of _contextRef entirely\n\tContext.Provider =\n\t\tContext._contextRef =\n\t\tContext.Consumer.contextType =\n\t\t\tContext;\n\n\treturn Context;\n}\n", "import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport {\n\tEMPTY_OBJ,\n\tEMPTY_ARR,\n\tINSERT_VNODE,\n\tMATCHED,\n\tUNDEFINED,\n\tNULL\n} from '../constants';\nimport { isArray } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * Diff the children of a virtual node\n * @param {PreactElement} parentDom The DOM element whose children are being\n * diffed\n * @param {ComponentChildren[]} renderResult\n * @param {VNode} newParentVNode The new virtual node whose children should be\n * diff'ed against oldParentVNode\n * @param {VNode} oldParentVNode The old virtual node whose children should be\n * diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\tlet i,\n\t\t/** @type {VNode} */\n\t\toldVNode,\n\t\t/** @type {VNode} */\n\t\tchildVNode,\n\t\t/** @type {PreactElement} */\n\t\tnewDom,\n\t\t/** @type {PreactElement} */\n\t\tfirstChildDom;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\t/** @type {VNode[]} */\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet newChildrenLength = renderResult.length;\n\n\toldDom = constructNewChildrenArray(\n\t\tnewParentVNode,\n\t\trenderResult,\n\t\toldChildren,\n\t\toldDom,\n\t\tnewChildrenLength\n\t);\n\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\tchildVNode = newParentVNode._children[i];\n\t\tif (childVNode == NULL) continue;\n\n\t\t// At this point, constructNewChildrenArray has assigned _index to be the\n\t\t// matchingIndex for this VNode's oldVNode (or -1 if there is no oldVNode).\n\t\tif (childVNode._index == -1) {\n\t\t\toldVNode = EMPTY_OBJ;\n\t\t} else {\n\t\t\toldVNode = oldChildren[childVNode._index] || EMPTY_OBJ;\n\t\t}\n\n\t\t// Update childVNode._index to its final index\n\t\tchildVNode._index = i;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tlet result = diff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\n\t\t// Adjust DOM nodes\n\t\tnewDom = childVNode._dom;\n\t\tif (childVNode.ref && oldVNode.ref != childVNode.ref) {\n\t\t\tif (oldVNode.ref) {\n\t\t\t\tapplyRef(oldVNode.ref, NULL, childVNode);\n\t\t\t}\n\t\t\trefQueue.push(\n\t\t\t\tchildVNode.ref,\n\t\t\t\tchildVNode._component || newDom,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t}\n\n\t\tif (firstChildDom == NULL && newDom != NULL) {\n\t\t\tfirstChildDom = newDom;\n\t\t}\n\n\t\tlet shouldPlace = !!(childVNode._flags & INSERT_VNODE);\n\t\tif (shouldPlace || oldVNode._children === childVNode._children) {\n\t\t\toldDom = insert(childVNode, oldDom, parentDom, shouldPlace);\n\t\t} else if (typeof childVNode.type == 'function' && result !== UNDEFINED) {\n\t\t\toldDom = result;\n\t\t} else if (newDom) {\n\t\t\toldDom = newDom.nextSibling;\n\t\t}\n\n\t\t// Unset diffing flags\n\t\tchildVNode._flags &= ~(INSERT_VNODE | MATCHED);\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} newParentVNode\n * @param {ComponentChildren[]} renderResult\n * @param {VNode[]} oldChildren\n */\nfunction constructNewChildrenArray(\n\tnewParentVNode,\n\trenderResult,\n\toldChildren,\n\toldDom,\n\tnewChildrenLength\n) {\n\t/** @type {number} */\n\tlet i;\n\t/** @type {VNode} */\n\tlet childVNode;\n\t/** @type {VNode} */\n\tlet oldVNode;\n\n\tlet oldChildrenLength = oldChildren.length,\n\t\tremainingOldChildren = oldChildrenLength;\n\n\tlet skew = 0;\n\n\tnewParentVNode._children = new Array(newChildrenLength);\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\t// @ts-expect-error We are reusing the childVNode variable to hold both the\n\t\t// pre and post normalized childVNode\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == NULL ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tnewParentVNode._children[i] = NULL;\n\t\t\tcontinue;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint' ||\n\t\t\tchildVNode.constructor == String\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tNULL,\n\t\t\t\tchildVNode,\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (childVNode.constructor === UNDEFINED && childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : NULL,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tnewParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\tconst skewedIndex = i + skew;\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Temporarily store the matchingIndex on the _index property so we can pull\n\t\t// out the oldVNode in diffChildren. We'll override this to the VNode's\n\t\t// final index after using this property to get the oldVNode\n\t\tconst matchingIndex = (childVNode._index = findMatchingIndex(\n\t\t\tchildVNode,\n\t\t\toldChildren,\n\t\t\tskewedIndex,\n\t\t\tremainingOldChildren\n\t\t));\n\n\t\toldVNode = NULL;\n\t\tif (matchingIndex != -1) {\n\t\t\toldVNode = oldChildren[matchingIndex];\n\t\t\tremainingOldChildren--;\n\t\t\tif (oldVNode) {\n\t\t\t\toldVNode._flags |= MATCHED;\n\t\t\t}\n\t\t}\n\n\t\t// Here, we define isMounting for the purposes of the skew diffing\n\t\t// algorithm. Nodes that are unsuspending are considered mounting and we detect\n\t\t// this by checking if oldVNode._original == null\n\t\tconst isMounting = oldVNode == NULL || oldVNode._original == NULL;\n\n\t\tif (isMounting) {\n\t\t\tif (matchingIndex == -1) {\n\t\t\t\t// When the array of children is growing we need to decrease the skew\n\t\t\t\t// as we are adding a new element to the array.\n\t\t\t\t// Example:\n\t\t\t\t// [1, 2, 3] --> [0, 1, 2, 3]\n\t\t\t\t// oldChildren   newChildren\n\t\t\t\t//\n\t\t\t\t// The new element is at index 0, so our skew is 0,\n\t\t\t\t// we need to decrease the skew as we are adding a new element.\n\t\t\t\t// The decrease will cause us to compare the element at position 1\n\t\t\t\t// with value 1 with the element at position 0 with value 0.\n\t\t\t\t//\n\t\t\t\t// A linear concept is applied when the array is shrinking,\n\t\t\t\t// if the length is unchanged we can assume that no skew\n\t\t\t\t// changes are needed.\n\t\t\t\tif (newChildrenLength > oldChildrenLength) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else if (newChildrenLength < oldChildrenLength) {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we are mounting a DOM VNode, mark it for insertion\n\t\t\tif (typeof childVNode.type != 'function') {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t} else if (matchingIndex != skewedIndex) {\n\t\t\t// When we move elements around i.e. [0, 1, 2] --> [1, 0, 2]\n\t\t\t// --> we diff 1, we find it at position 1 while our skewed index is 0 and our skew is 0\n\t\t\t//     we set the skew to 1 as we found an offset.\n\t\t\t// --> we diff 0, we find it at position 0 while our skewed index is at 2 and our skew is 1\n\t\t\t//     this makes us increase the skew again.\n\t\t\t// --> we diff 2, we find it at position 2 while our skewed index is at 4 and our skew is 2\n\t\t\t//\n\t\t\t// this becomes an optimization question where currently we see a 1 element offset as an insertion\n\t\t\t// or deletion i.e. we optimize for [0, 1, 2] --> [9, 0, 1, 2]\n\t\t\t// while a more than 1 offset we see as a swap.\n\t\t\t// We could probably build heuristics for having an optimized course of action here as well, but\n\t\t\t// might go at the cost of some bytes.\n\t\t\t//\n\t\t\t// If we wanted to optimize for i.e. only swaps we'd just do the last two code-branches and have\n\t\t\t// only the first item be a re-scouting and all the others fall in their skewed counter-part.\n\t\t\t// We could also further optimize for swaps\n\t\t\tif (matchingIndex == skewedIndex - 1) {\n\t\t\t\tskew--;\n\t\t\t} else if (matchingIndex == skewedIndex + 1) {\n\t\t\t\tskew++;\n\t\t\t} else {\n\t\t\t\tif (matchingIndex > skewedIndex) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\n\t\t\t\t// Move this VNode's DOM if the original index (matchingIndex) doesn't\n\t\t\t\t// match the new skew index (i + new skew)\n\t\t\t\t// In the former two branches we know that it matches after skewing\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any. Loop forwards so that as we\n\t// unmount DOM from the beginning of the oldChildren, we can adjust oldDom to\n\t// point to the next child, which needs to be the first DOM node that won't be\n\t// unmounted.\n\tif (remainingOldChildren) {\n\t\tfor (i = 0; i < oldChildrenLength; i++) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode != NULL && (oldVNode._flags & MATCHED) == 0) {\n\t\t\t\tif (oldVNode._dom == oldDom) {\n\t\t\t\t\toldDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} parentVNode\n * @param {PreactElement} oldDom\n * @param {PreactElement} parentDom\n * @param {boolean} shouldPlace\n * @returns {PreactElement}\n */\nfunction insert(parentVNode, oldDom, parentDom, shouldPlace) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\n\tif (typeof parentVNode.type == 'function') {\n\t\tlet children = parentVNode._children;\n\t\tfor (let i = 0; children && i < children.length; i++) {\n\t\t\tif (children[i]) {\n\t\t\t\t// If we enter this code path on sCU bailout, where we copy\n\t\t\t\t// oldVNode._children to newVNode._children, we need to update the old\n\t\t\t\t// children's _parent pointer to point to the newVNode (parentVNode\n\t\t\t\t// here).\n\t\t\t\tchildren[i]._parent = parentVNode;\n\t\t\t\toldDom = insert(children[i], oldDom, parentDom, shouldPlace);\n\t\t\t}\n\t\t}\n\n\t\treturn oldDom;\n\t} else if (parentVNode._dom != oldDom) {\n\t\tif (shouldPlace) {\n\t\t\tif (oldDom && parentVNode.type && !oldDom.parentNode) {\n\t\t\t\toldDom = getDomSibling(parentVNode);\n\t\t\t}\n\t\t\tparentDom.insertBefore(parentVNode._dom, oldDom || NULL);\n\t\t}\n\t\toldDom = parentVNode._dom;\n\t}\n\n\tdo {\n\t\toldDom = oldDom && oldDom.nextSibling;\n\t} while (oldDom != NULL && oldDom.nodeType == 8);\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {ComponentChildren} children The unflattened children of a virtual\n * node\n * @returns {VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == NULL || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\n/**\n * @param {VNode} childVNode\n * @param {VNode[]} oldChildren\n * @param {number} skewedIndex\n * @param {number} remainingOldChildren\n * @returns {number}\n */\nfunction findMatchingIndex(\n\tchildVNode,\n\toldChildren,\n\tskewedIndex,\n\tremainingOldChildren\n) {\n\tconst key = childVNode.key;\n\tconst type = childVNode.type;\n\tlet oldVNode = oldChildren[skewedIndex];\n\tconst matched = oldVNode != NULL && (oldVNode._flags & MATCHED) == 0;\n\n\t// We only need to perform a search if there are more children\n\t// (remainingOldChildren) to search. However, if the oldVNode we just looked\n\t// at skewedIndex was not already used in this diff, then there must be at\n\t// least 1 other (so greater than 1) remainingOldChildren to attempt to match\n\t// against. So the following condition checks that ensuring\n\t// remainingOldChildren > 1 if the oldVNode is not already used/matched. Else\n\t// if the oldVNode was null or matched, then there could needs to be at least\n\t// 1 (aka `remainingOldChildren > 0`) children to find and compare against.\n\t//\n\t// If there is an unkeyed functional VNode, that isn't a built-in like our Fragment,\n\t// we should not search as we risk re-using state of an unrelated VNode. (reverted for now)\n\tlet shouldSearch =\n\t\t// (typeof type != 'function' || type === Fragment || key) &&\n\t\tremainingOldChildren > (matched ? 1 : 0);\n\n\tif (\n\t\t(oldVNode === NULL && key == null) ||\n\t\t(matched && key == oldVNode.key && type == oldVNode.type)\n\t) {\n\t\treturn skewedIndex;\n\t} else if (shouldSearch) {\n\t\tlet x = skewedIndex - 1;\n\t\tlet y = skewedIndex + 1;\n\t\twhile (x >= 0 || y < oldChildren.length) {\n\t\t\tconst childIndex = x >= 0 ? x-- : y++;\n\t\t\toldVNode = oldChildren[childIndex];\n\t\t\tif (\n\t\t\t\toldVNode != NULL &&\n\t\t\t\t(oldVNode._flags & MATCHED) == 0 &&\n\t\t\t\tkey == oldVNode.key &&\n\t\t\t\ttype == oldVNode.type\n\t\t\t) {\n\t\t\t\treturn childIndex;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn -1;\n}\n", "import {\n\tEMPTY_OBJ,\n\tMATH_NAMESPACE,\n\tMODE_HYDRATE,\n\tMODE_SUSPENDED,\n\tNULL,\n\tRESET_MODE,\n\tSVG_NAMESPACE,\n\tUNDEFINED,\n\tXHTML_NAMESPACE\n} from '../constants';\nimport { BaseComponent, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * @template {any} T\n * @typedef {import('../internal').Ref<T>} Ref<T>\n */\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {PreactElement} parentDom The parent of the DOM element\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\t/** @type {any} */\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== UNDEFINED) return NULL;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._flags & MODE_SUSPENDED) {\n\t\tisHydrating = !!(oldVNode._flags & MODE_HYDRATE);\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\touter: if (typeof newType == 'function') {\n\t\ttry {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\t\t\tconst isClassComponent =\n\t\t\t\t'prototype' in newType && newType.prototype.render;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif (isClassComponent) {\n\t\t\t\t\t// @ts-expect-error The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-expect-error Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new BaseComponent(\n\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (isClassComponent && c._nextState == NULL) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (isClassComponent && newType.getDerivedStateFromProps != NULL) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tc.componentWillMount != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidMount != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tnewVNode._original == oldVNode._original ||\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != NULL &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false)\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original != oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.some(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != NULL) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidUpdate != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\t\t\tc._force = false;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif (isClassComponent) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != NULL) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (isClassComponent && !isNew && c.getSnapshotBeforeUpdate != NULL) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != NULL && tmp.type === Fragment && tmp.key == NULL;\n\t\t\tlet renderResult = tmp;\n\n\t\t\tif (isTopLevelFragment) {\n\t\t\t\trenderResult = cloneNode(tmp.props.children);\n\t\t\t}\n\n\t\t\toldDom = diffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnamespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._flags &= RESET_MODE;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = NULL;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnewVNode._original = NULL;\n\t\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\t\tif (isHydrating || excessDomChildren != NULL) {\n\t\t\t\tif (e.then) {\n\t\t\t\t\tnewVNode._flags |= isHydrating\n\t\t\t\t\t\t? MODE_HYDRATE | MODE_SUSPENDED\n\t\t\t\t\t\t: MODE_SUSPENDED;\n\n\t\t\t\t\twhile (oldDom && oldDom.nodeType == 8 && oldDom.nextSibling) {\n\t\t\t\t\t\toldDom = oldDom.nextSibling;\n\t\t\t\t\t}\n\n\t\t\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = NULL;\n\t\t\t\t\tnewVNode._dom = oldDom;\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = excessDomChildren.length; i--; ) {\n\t\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t\t}\n\t\t\t\t\tmarkAsForce(newVNode);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\tif (!e.then) markAsForce(newVNode);\n\t\t\t}\n\t\t\toptions._catchError(e, newVNode, oldVNode);\n\t\t}\n\t} else if (\n\t\texcessDomChildren == NULL &&\n\t\tnewVNode._original == oldVNode._original\n\t) {\n\t\tnewVNode._children = oldVNode._children;\n\t\tnewVNode._dom = oldVNode._dom;\n\t} else {\n\t\toldDom = newVNode._dom = diffElementNodes(\n\t\t\toldVNode._dom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\t}\n\n\tif ((tmp = options.diffed)) tmp(newVNode);\n\n\treturn newVNode._flags & MODE_SUSPENDED ? undefined : oldDom;\n}\n\nfunction markAsForce(vnode) {\n\tif (vnode && vnode._component) vnode._component._force = true;\n\tif (vnode && vnode._children) vnode._children.forEach(markAsForce);\n}\n\n/**\n * @param {Array<Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {VNode} root\n */\nexport function commitRoot(commitQueue, root, refQueue) {\n\tfor (let i = 0; i < refQueue.length; i++) {\n\t\tapplyRef(refQueue[i], refQueue[++i], refQueue[++i]);\n\t}\n\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-expect-error Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-expect-error See above comment on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\nfunction cloneNode(node) {\n\tif (\n\t\ttypeof node != 'object' ||\n\t\tnode == NULL ||\n\t\t(node._depth && node._depth > 0)\n\t) {\n\t\treturn node;\n\t}\n\n\tif (isArray(node)) {\n\t\treturn node.map(cloneNode);\n\t}\n\n\treturn assign({}, node);\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {PreactElement} dom The DOM element representing the virtual nodes\n * being diffed\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n * @returns {PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating,\n\trefQueue\n) {\n\tlet oldProps = oldVNode.props || EMPTY_OBJ;\n\tlet newProps = newVNode.props;\n\tlet nodeType = /** @type {string} */ (newVNode.type);\n\t/** @type {any} */\n\tlet i;\n\t/** @type {{ __html?: string }} */\n\tlet newHtml;\n\t/** @type {{ __html?: string }} */\n\tlet oldHtml;\n\t/** @type {ComponentChildren} */\n\tlet newChildren;\n\tlet value;\n\tlet inputValue;\n\tlet checked;\n\n\t// Tracks entering and exiting namespaces when descending through the tree.\n\tif (nodeType == 'svg') namespace = SVG_NAMESPACE;\n\telse if (nodeType == 'math') namespace = MATH_NAMESPACE;\n\telse if (!namespace) namespace = XHTML_NAMESPACE;\n\n\tif (excessDomChildren != NULL) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tvalue = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tvalue &&\n\t\t\t\t'setAttribute' in value == !!nodeType &&\n\t\t\t\t(nodeType ? value.localName == nodeType : value.nodeType == 3)\n\t\t\t) {\n\t\t\t\tdom = value;\n\t\t\t\texcessDomChildren[i] = NULL;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == NULL) {\n\t\tif (nodeType == NULL) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = document.createElementNS(\n\t\t\tnamespace,\n\t\t\tnodeType,\n\t\t\tnewProps.is && newProps\n\t\t);\n\n\t\t// we are creating a new node, so we can assume this is a new subtree (in\n\t\t// case we are hydrating), this deopts the hydrate\n\t\tif (isHydrating) {\n\t\t\tif (options._hydrationMismatch)\n\t\t\t\toptions._hydrationMismatch(newVNode, excessDomChildren);\n\t\t\tisHydrating = false;\n\t\t}\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = NULL;\n\t}\n\n\tif (nodeType == NULL) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data != newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\t// If we are in a situation where we are not hydrating but are using\n\t\t// existing DOM (e.g. replaceNode) we should read the existing DOM\n\t\t// attributes to diff them\n\t\tif (!isHydrating && excessDomChildren != NULL) {\n\t\t\toldProps = {};\n\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\tvalue = dom.attributes[i];\n\t\t\t\toldProps[value.name] = value.value;\n\t\t\t}\n\t\t}\n\n\t\tfor (i in oldProps) {\n\t\t\tvalue = oldProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\toldHtml = value;\n\t\t\t} else if (!(i in newProps)) {\n\t\t\t\tif (\n\t\t\t\t\t(i == 'value' && 'defaultValue' in newProps) ||\n\t\t\t\t\t(i == 'checked' && 'defaultChecked' in newProps)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tsetProperty(dom, i, NULL, value, namespace);\n\t\t\t}\n\t\t}\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tfor (i in newProps) {\n\t\t\tvalue = newProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t\tnewChildren = value;\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\tnewHtml = value;\n\t\t\t} else if (i == 'value') {\n\t\t\t\tinputValue = value;\n\t\t\t} else if (i == 'checked') {\n\t\t\t\tchecked = value;\n\t\t\t} else if (\n\t\t\t\t(!isHydrating || typeof value == 'function') &&\n\t\t\t\toldProps[i] !== value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, value, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\tif (\n\t\t\t\t!isHydrating &&\n\t\t\t\t(!oldHtml ||\n\t\t\t\t\t(newHtml.__html != oldHtml.__html && newHtml.__html != dom.innerHTML))\n\t\t\t) {\n\t\t\t\tdom.innerHTML = newHtml.__html;\n\t\t\t}\n\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tif (oldHtml) dom.innerHTML = '';\n\n\t\t\tdiffChildren(\n\t\t\t\t// @ts-expect-error\n\t\t\t\tnewVNode.type == 'template' ? dom.content : dom,\n\t\t\t\tisArray(newChildren) ? newChildren : [newChildren],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnodeType == 'foreignObject' ? XHTML_NAMESPACE : namespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != NULL) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// As above, don't diff props during hydration\n\t\tif (!isHydrating) {\n\t\t\ti = 'value';\n\t\t\tif (nodeType == 'progress' && inputValue == NULL) {\n\t\t\t\tdom.removeAttribute('value');\n\t\t\t} else if (\n\t\t\t\tinputValue != UNDEFINED &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(inputValue !== dom[i] ||\n\t\t\t\t\t(nodeType == 'progress' && !inputValue) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType == 'option' && inputValue != oldProps[i]))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, inputValue, oldProps[i], namespace);\n\t\t\t}\n\n\t\t\ti = 'checked';\n\t\t\tif (checked != UNDEFINED && checked != dom[i]) {\n\t\t\t\tsetProperty(dom, i, checked, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {Ref<any> & { _unmount?: unknown }} ref\n * @param {any} value\n * @param {VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') {\n\t\t\tlet hasRefUnmount = typeof ref._unmount == 'function';\n\t\t\tif (hasRefUnmount) {\n\t\t\t\t// @ts-ignore TS doesn't like moving narrowing checks into variables\n\t\t\t\tref._unmount();\n\t\t\t}\n\n\t\t\tif (!hasRefUnmount || value != NULL) {\n\t\t\t\t// Store the cleanup function on the function\n\t\t\t\t// instance object itself to avoid shape\n\t\t\t\t// transitioning vnode\n\t\t\t\tref._unmount = ref(value);\n\t\t\t}\n\t\t} else ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {VNode} vnode The virtual node to unmount\n * @param {VNode} parentVNode The parent of the VNode that initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current == vnode._dom) {\n\t\t\tapplyRef(r, NULL, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != NULL) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = NULL;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type != 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\tvnode._component = vnode._parent = vnode._dom = UNDEFINED;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n", "import { EMPTY_OBJ, NULL } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\t// https://github.com/preactjs/preact/issues/3794\n\tif (parentDom == document) {\n\t\tparentDom = document.documentElement;\n\t}\n\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode == 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? NULL\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, NULL, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [],\n\t\trefQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.namespaceURI,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t\t? NULL\n\t\t\t\t: parentDom.firstChild\n\t\t\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t\t\t: NULL,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t\t? oldVNode._dom\n\t\t\t\t: parentDom.firstChild,\n\t\tisHydrating,\n\t\trefQueue\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode, refQueue);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n", "import { assign, slice } from './util';\nimport { createVNode } from './create-element';\nimport { NULL, UNDEFINED } from './constants';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Any additional arguments will be used\n * as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\n\tlet defaultProps;\n\n\tif (vnode.type && vnode.type.defaultProps) {\n\t\tdefaultProps = vnode.type.defaultProps;\n\t}\n\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse if (props[i] === UNDEFINED && defaultProps != UNDEFINED) {\n\t\t\tnormalizedProps[i] = defaultProps[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tNULL\n\t);\n}\n", "import { NULL } from '../constants';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw the error that was caught (except\n * for unmounting when this parameter is the highest parent that was being\n * unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component,\n\t\t/** @type {import('../internal').ComponentType} */\n\t\tctor,\n\t\t/** @type {boolean} */\n\t\thandled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != NULL) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != NULL) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n", "const ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out += str.slice(last, i);\n\t\tout += ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out += str.slice(last, i);\n\treturn out;\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { options, Fragment } from 'preact';\nimport { encodeEntities } from './utils';\nimport { IS_NON_DIMENSIONAL } from '../../src/constants';\n\nlet vnodeId = 0;\n\nconst isArray = Array.isArray;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\tif (!props) props = {};\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = props,\n\t\tref,\n\t\ti;\n\n\tif ('ref' in normalizedProps) {\n\t\tnormalizedProps = {};\n\t\tfor (i in props) {\n\t\t\tif (i == 'ref') {\n\t\t\t\tref = props[i];\n\t\t\t} else {\n\t\t\t\tnormalizedProps[i] = props[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @type {VNode & { __source: any; __self: any }} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t_index: -1,\n\t\t_flags: 0,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\n/**\n * Create a template vnode. This function is not expected to be\n * used directly, but rather through a precompile JSX transform\n * @param {string[]} templates\n * @param  {Array<string | null | VNode>} exprs\n * @returns {VNode}\n */\nfunction jsxTemplate(templates, ...exprs) {\n\tconst vnode = createVNode(Fragment, { tpl: templates, exprs });\n\t// Bypass render to string top level Fragment optimization\n\tvnode.key = vnode._vnode;\n\treturn vnode;\n}\n\nconst JS_TO_CSS = {};\nconst CSS_REGEX = /[A-Z]/g;\n\n/**\n * Unwrap potential signals.\n * @param {*} value\n * @returns {*}\n */\nfunction normalizeAttrValue(value) {\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.valueOf === 'function'\n\t\t? value.valueOf()\n\t\t: value;\n}\n\n/**\n * Serialize an HTML attribute to a string. This function is not\n * expected to be used directly, but rather through a precompile\n * JSX transform\n * @param {string} name The attribute name\n * @param {*} value The attribute value\n * @returns {string}\n */\nfunction jsxAttr(name, value) {\n\tif (options.attr) {\n\t\tconst result = options.attr(name, value);\n\t\tif (typeof result === 'string') return result;\n\t}\n\n\tvalue = normalizeAttrValue(value);\n\n\tif (name === 'ref' || name === 'key') return '';\n\tif (name === 'style' && typeof value === 'object') {\n\t\tlet str = '';\n\t\tfor (let prop in value) {\n\t\t\tlet val = value[prop];\n\t\t\tif (val != null && val !== '') {\n\t\t\t\tconst name =\n\t\t\t\t\tprop[0] == '-'\n\t\t\t\t\t\t? prop\n\t\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t\t\t(JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\t\tlet suffix = ';';\n\t\t\t\tif (\n\t\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t\t// Exclude custom-attributes\n\t\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t\t!IS_NON_DIMENSIONAL.test(name)\n\t\t\t\t) {\n\t\t\t\t\tsuffix = 'px;';\n\t\t\t\t}\n\t\t\t\tstr = str + name + ':' + val + suffix;\n\t\t\t}\n\t\t}\n\t\treturn name + '=\"' + encodeEntities(str) + '\"';\n\t}\n\n\tif (\n\t\tvalue == null ||\n\t\tvalue === false ||\n\t\ttypeof value === 'function' ||\n\t\ttypeof value === 'object'\n\t) {\n\t\treturn '';\n\t} else if (value === true) return name;\n\n\treturn name + '=\"' + encodeEntities('' + value) + '\"';\n}\n\n/**\n * Escape a dynamic child passed to `jsxTemplate`. This function\n * is not expected to be used directly, but rather through a\n * precompile JSX transform\n * @param {*} value\n * @returns {string | null | VNode | Array<string | null | VNode>}\n */\nfunction jsxEscape(value) {\n\tif (\n\t\tvalue == null ||\n\t\ttypeof value === 'boolean' ||\n\t\ttypeof value === 'function'\n\t) {\n\t\treturn null;\n\t}\n\n\tif (typeof value === 'object') {\n\t\t// Check for VNode\n\t\tif (value.constructor === undefined) return value;\n\n\t\tif (isArray(value)) {\n\t\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\t\tvalue[i] = jsxEscape(value[i]);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn encodeEntities('' + value);\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment,\n\t// precompiled JSX transform\n\tjsxTemplate,\n\tjsxAttr,\n\tjsxEscape\n};\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport type {ComponentChildren} from 'preact';\n\nexport type ButtonGroupProps = {\n  children: ComponentChildren;\n  orientation: 'vertical' | 'horizontal';\n};\n\n/** Renders a group of buttons with Widget CSS */\nexport const ButtonGroup = (props: ButtonGroupProps) => {\n  const {children, orientation = 'horizontal'} = props;\n  return <div className={`deck-widget-button-group ${orientation}`}>{children}</div>;\n};\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport type {ComponentChildren, JSX} from 'preact';\n\nexport type GroupedIconButtonProps = {\n  className?: string;\n  label?: string;\n  onClick?: JSX.MouseEventHandler<HTMLButtonElement>;\n  children?: ComponentChildren;\n};\n\n/** Renders an icon button as part of a ButtonGroup */\nexport const GroupedIconButton = (props: GroupedIconButtonProps) => {\n  const {className = '', label, onClick, children} = props;\n  return (\n    <button\n      className={`deck-widget-icon-button ${className}`}\n      type=\"button\"\n      onClick={onClick}\n      title={label}\n    >\n      {children ? children : <div className=\"deck-widget-icon\" />}\n    </button>\n  );\n};\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {Widget, FlyToInterpolator, LinearInterpolator} from '@deck.gl/core';\nimport type {Viewport, WidgetProps, WidgetPlacement} from '@deck.gl/core';\nimport {render} from 'preact';\nimport {ButtonGroup} from './lib/components/button-group';\nimport {GroupedIconButton} from './lib/components/grouped-icon-button';\n\nexport type ZoomWidgetProps = WidgetProps & {\n  /** Widget positioning within the view. Default 'top-left'. */\n  placement?: WidgetPlacement;\n  /** View to attach to and interact with. Required when using multiple views. */\n  viewId?: string | null;\n  /** Button orientation. */\n  orientation?: 'vertical' | 'horizontal';\n  /** Tooltip message on zoom in button. */\n  zoomInLabel?: string;\n  /** Tooltip message on zoom out button. */\n  zoomOutLabel?: string;\n  /** Zoom transition duration in ms. 0 disables the transition */\n  transitionDuration?: number;\n};\n\nexport class ZoomWidget extends Widget<ZoomWidgetProps> {\n  static defaultProps: Required<ZoomWidgetProps> = {\n    ...Widget.defaultProps,\n    id: 'zoom',\n    placement: 'top-left',\n    orientation: 'vertical',\n    transitionDuration: 200,\n    zoomInLabel: 'Zoom In',\n    zoomOutLabel: 'Zoom Out',\n    viewId: null\n  };\n\n  className = 'deck-widget-zoom';\n  placement: WidgetPlacement = 'top-left';\n  viewports: {[id: string]: Viewport} = {};\n\n  constructor(props: ZoomWidgetProps = {}) {\n    super(props);\n    this.setProps(this.props);\n  }\n\n  setProps(props: Partial<ZoomWidgetProps>) {\n    this.placement = props.placement ?? this.placement;\n    this.viewId = props.viewId ?? this.viewId;\n    super.setProps(props);\n  }\n\n  onRenderHTML(rootElement: HTMLElement): void {\n    const ui = (\n      <ButtonGroup orientation={this.props.orientation}>\n        <GroupedIconButton\n          onClick={() => this.handleZoomIn()}\n          label={this.props.zoomInLabel}\n          className=\"deck-widget-zoom-in\"\n        />\n        <GroupedIconButton\n          onClick={() => this.handleZoomOut()}\n          label={this.props.zoomOutLabel}\n          className=\"deck-widget-zoom-out\"\n        />\n      </ButtonGroup>\n    );\n    render(ui, rootElement);\n  }\n\n  onViewportChange(viewport: Viewport) {\n    this.viewports[viewport.id] = viewport;\n  }\n\n  handleZoom(viewport: Viewport, nextZoom: number) {\n    const viewId = this.viewId || viewport?.id || 'default-view';\n    const nextViewState: Record<string, unknown> = {\n      ...viewport,\n      zoom: nextZoom\n    };\n    if (this.props.transitionDuration > 0) {\n      nextViewState.transitionDuration = this.props.transitionDuration;\n      nextViewState.transitionInterpolator =\n        'latitude' in nextViewState\n          ? new FlyToInterpolator()\n          : new LinearInterpolator({\n              transitionProps: ['zoom']\n            });\n    }\n    this.setViewState(viewId, nextViewState);\n  }\n\n  handleZoomIn() {\n    for (const viewport of Object.values(this.viewports)) {\n      this.handleZoom(viewport, viewport.zoom + 1);\n    }\n  }\n\n  handleZoomOut() {\n    for (const viewport of Object.values(this.viewports)) {\n      this.handleZoom(viewport, viewport.zoom - 1);\n    }\n  }\n\n  /** @todo - move to deck or widget manager */\n  private setViewState(viewId: string, viewState: Record<string, unknown>): void {\n    // @ts-ignore Using private method temporary until there's a public one\n    this.deck._onViewStateChange({viewId, viewState, interactionState: {}});\n  }\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport type {ComponentChildren, JSX} from 'preact';\n\nexport type IconButtonProps = {\n  className?: string;\n  label?: string;\n  onClick?: JSX.MouseEventHandler<HTMLButtonElement>;\n  children?: ComponentChildren;\n};\n\n/** Renders a button component with widget CSS */\nexport const IconButton = (props: IconButtonProps) => {\n  const {className = '', label, onClick, children} = props;\n  return (\n    <div className=\"deck-widget-button\">\n      <button\n        className={`deck-widget-icon-button ${className}`}\n        type=\"button\"\n        onClick={onClick}\n        title={label}\n      >\n        {children ? children : <div className=\"deck-widget-icon\" />}\n      </button>\n    </div>\n  );\n};\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport type {WidgetPlacement, WidgetProps} from '@deck.gl/core';\nimport type {ViewStateMap, View} from '@deck.gl/core';\nimport {render} from 'preact';\nimport {Widget} from '@deck.gl/core';\nimport {IconButton} from './lib/components/icon-button';\n\n/** @note Mirrors an internal calss in deck.gl/core. We can easily redefine it here */\ntype ViewOrViews = View | View[] | null;\n\n/** Properties for the ResetViewWidget */\nexport type ResetViewWidgetProps<ViewsT extends ViewOrViews = null> = WidgetProps & {\n  /** Widget positioning within the view. Default 'top-left'. */\n  placement?: WidgetPlacement;\n  /** Tooltip message */\n  label?: string;\n  /** The initial view state to reset the view to. Defaults to deck.props.initialViewState */\n  initialViewState?: ViewStateMap<ViewsT>;\n  /** View to interact with. Required when using multiple views. */\n  viewId?: string | null;\n};\n\n/**\n * A button widget that resets the view state of deck to an initial state.\n */\nexport class ResetViewWidget<ViewsT extends ViewOrViews = null> extends Widget<\n  ResetViewWidgetProps<ViewsT>,\n  ViewsT\n> {\n  static defaultProps: Required<ResetViewWidgetProps> = {\n    ...Widget.defaultProps,\n    id: 'reset-view',\n    placement: 'top-left',\n    label: 'Reset View',\n    initialViewState: undefined!,\n    viewId: null\n  };\n\n  className = 'deck-widget-reset-view';\n  placement: WidgetPlacement = 'top-left';\n\n  constructor(props: ResetViewWidgetProps<ViewsT> = {}) {\n    super(props);\n    this.setProps(this.props);\n  }\n\n  setProps(props: Partial<ResetViewWidgetProps<ViewsT>>) {\n    this.placement = props.placement ?? this.placement;\n    this.viewId = props.viewId ?? this.viewId;\n    super.setProps(props);\n  }\n\n  onRenderHTML(rootElement: HTMLElement): void {\n    render(\n      <IconButton\n        className=\"deck-widget-reset-focus\"\n        label={this.props.label}\n        onClick={this.handleClick.bind(this)}\n      />,\n      rootElement\n    );\n  }\n\n  handleClick() {\n    const initialViewState = this.props.initialViewState || this.deck?.props.initialViewState;\n    this.setViewState(initialViewState);\n  }\n\n  setViewState(viewState?: ViewStateMap<ViewsT>) {\n    const viewId = (this.props.viewId || 'default-view') as unknown as string;\n    const nextViewState = {\n      ...(viewId !== 'default-view' ? viewState?.[viewId] : viewState)\n      // only works for geospatial?\n      // transitionDuration: this.props.transitionDuration,\n      // transitionInterpolator: new FlyToInterpolator()\n    };\n    // @ts-ignore Using private method temporary until there's a public one\n    this.deck._onViewStateChange({viewId, viewState: nextViewState, interactionState: {}});\n  }\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {Widget, LinearInterpolator} from '@deck.gl/core';\nimport type {Viewport, WidgetPlacement, WidgetProps} from '@deck.gl/core';\nimport {render} from 'preact';\n\nexport type GimbalWidgetProps = WidgetProps & {\n  placement?: WidgetPlacement;\n  /** View to attach to and interact with. Required when using multiple views. */\n  viewId?: string | null;\n  /** Tooltip message. */\n  label?: string;\n  /** Width of gimbal lines. */\n  strokeWidth?: number;\n  /** Transition duration in ms when resetting rotation. */\n  transitionDuration?: number;\n};\n\nexport class GimbalWidget extends Widget<GimbalWidgetProps> {\n  static defaultProps: Required<GimbalWidgetProps> = {\n    ...Widget.defaultProps,\n    id: 'gimbal',\n    placement: 'top-left',\n    viewId: null,\n    label: 'Gimbal',\n    strokeWidth: 1.5,\n    transitionDuration: 200\n  };\n\n  className = 'deck-widget-gimbal';\n  placement: WidgetPlacement = 'top-left';\n  viewports: {[id: string]: Viewport} = {};\n\n  constructor(props: GimbalWidgetProps = {}) {\n    super(props);\n    this.setProps(this.props);\n  }\n\n  setProps(props: Partial<GimbalWidgetProps>) {\n    this.placement = props.placement ?? this.placement;\n    this.viewId = props.viewId ?? this.viewId;\n    super.setProps(props);\n  }\n\n  onRenderHTML(rootElement: HTMLElement): void {\n    const viewId = this.viewId || Object.values(this.viewports)[0]?.id || 'default-view';\n    const widgetViewport = this.viewports[viewId];\n    const {rotationOrbit, rotationX} = this.getNormalizedRotation(widgetViewport);\n    // Note - we use CSS 3D transforms instead of SVG 2D transforms\n    const ui = (\n      <div className=\"deck-widget-button\" style={{perspective: 100, pointerEvents: 'auto'}}>\n        <button\n          type=\"button\"\n          onClick={() => {\n            for (const viewport of Object.values(this.viewports)) {\n              this.resetOrbitView(viewport);\n            }\n          }}\n          title={this.props.label}\n          style={{position: 'relative', width: 26, height: 26}}\n        >\n          {/* Outer ring */}\n          <svg\n            className=\"gimbal-outer-ring\"\n            width=\"100%\"\n            height=\"100%\"\n            viewBox=\"0 0 26 26\"\n            style={{\n              position: 'absolute',\n              top: 0,\n              left: 0,\n              transform: `rotateY(${rotationOrbit}deg)`\n            }}\n          >\n            <circle\n              cx=\"13\"\n              cy=\"13\"\n              r=\"10\"\n              stroke=\"var(--icon-gimbal-outer-color, rgb(68, 92, 204))\"\n              strokeWidth={this.props.strokeWidth}\n              fill=\"none\"\n            />\n          </svg>\n\n          {/* Inner ring */}\n          <svg\n            className=\"gimbal-inner-ring\"\n            width=\"100%\"\n            height=\"100%\"\n            viewBox=\"0 0 26 26\"\n            style={{\n              position: 'absolute',\n              top: 0,\n              left: 0,\n              transform: `rotateX(${rotationX}deg)`\n            }}\n          >\n            <circle\n              cx=\"13\"\n              cy=\"13\"\n              r=\"7\"\n              stroke=\"var(--icon-gimbal-inner-color, rgb(240, 92, 68))\"\n              strokeWidth={this.props.strokeWidth}\n              fill=\"none\"\n            />\n          </svg>\n        </button>\n      </div>\n    );\n\n    render(ui, rootElement);\n  }\n\n  onViewportChange(viewport: Viewport) {\n    this.viewports[viewport.id] = viewport;\n    this.updateHTML();\n  }\n\n  resetOrbitView(viewport?: Viewport) {\n    const viewId = this.getViewId(viewport);\n    const viewState = this.getViewState(viewId);\n    if ('rotationOrbit' in viewState || 'rotationX' in viewState) {\n      const nextViewState = {\n        ...viewState,\n        rotationOrbit: 0,\n        rotationX: 0,\n        transitionDuration: this.props.transitionDuration,\n        transitionInterpolator: new LinearInterpolator({\n          transitionProps: ['rotationOrbit', 'rotationX']\n        })\n      };\n      // @ts-ignore Using private method temporary until there's a public one\n      this.deck._onViewStateChange({viewId, viewState: nextViewState, interactionState: {}});\n    }\n  }\n\n  getNormalizedRotation(viewport?: Viewport): {rotationOrbit: number; rotationX: number} {\n    const viewState = this.getViewState(this.getViewId(viewport));\n    const [rz, rx] = this.getRotation(viewState);\n    const rotationOrbit = normalizeAndClampAngle(rz);\n    const rotationX = normalizeAndClampAngle(rx);\n    return {rotationOrbit, rotationX};\n  }\n\n  getRotation(viewState?: any): [number, number] {\n    if (viewState && ('rotationOrbit' in viewState || 'rotationX' in viewState)) {\n      return [-(viewState.rotationOrbit || 0), viewState.rotationX || 0];\n    }\n    return [0, 0];\n  }\n\n  // Move to Widget/WidgetManager?\n\n  getViewId(viewport?: Viewport) {\n    const viewId = this.viewId || viewport?.id || 'OrbitView';\n    return viewId;\n  }\n\n  getViewState(viewId: string) {\n    const viewManager = this.getViewManager();\n    const viewState = (viewId && viewManager.getViewState(viewId)) || viewManager.viewState;\n    return viewState;\n  }\n\n  getViewManager() {\n    // @ts-expect-error protected\n    const viewManager = this.deck?.viewManager;\n    if (!viewManager) {\n      throw new Error('wigdet must be added to a deck instance');\n    }\n    return viewManager;\n  }\n}\n\nfunction normalizeAndClampAngle(angle: number): number {\n  // Bring angle into [-180, 180]\n  let normalized = ((((angle + 180) % 360) + 360) % 360) - 180;\n\n  // Avoid rotating the gimbal rings to close to 90 degrees as they will visually disappear\n  const AVOID_ANGLE_DELTA = 10;\n  const distanceFrom90 = normalized - 90;\n  if (Math.abs(distanceFrom90) < AVOID_ANGLE_DELTA) {\n    if (distanceFrom90 < AVOID_ANGLE_DELTA) {\n      normalized = 90 + AVOID_ANGLE_DELTA;\n    } else if (distanceFrom90 > -AVOID_ANGLE_DELTA) {\n      normalized = 90 - AVOID_ANGLE_DELTA;\n    }\n  }\n  // Clamp to [-80, 80]\n  return normalized; // Math.max(-80, Math.min(80, normalized));\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {Widget, FlyToInterpolator, WebMercatorViewport, _GlobeViewport} from '@deck.gl/core';\nimport type {Viewport, WidgetPlacement, WidgetProps} from '@deck.gl/core';\nimport {render} from 'preact';\n\nexport type CompassWidgetProps = WidgetProps & {\n  /** Widget positioning within the view. Default 'top-left'. */\n  placement?: WidgetPlacement;\n  /** View to attach to and interact with. Required when using multiple views. */\n  viewId?: string | null;\n  /** Tooltip message. */\n  label?: string;\n  /** Bearing and pitch reset transition duration in ms. */\n  transitionDuration?: number;\n};\n\nexport class CompassWidget extends Widget<CompassWidgetProps> {\n  static defaultProps: Required<CompassWidgetProps> = {\n    ...Widget.defaultProps,\n    id: 'compass',\n    placement: 'top-left',\n    viewId: null,\n    label: 'Reset Compass',\n    transitionDuration: 200\n  };\n\n  className = 'deck-widget-compass';\n  placement: WidgetPlacement = 'top-left';\n  viewports: {[id: string]: Viewport} = {};\n\n  constructor(props: CompassWidgetProps = {}) {\n    super(props);\n    this.setProps(this.props);\n  }\n\n  setProps(props: Partial<CompassWidgetProps>) {\n    this.placement = props.placement ?? this.placement;\n    this.viewId = props.viewId ?? this.viewId;\n    super.setProps(props);\n  }\n\n  onRenderHTML(rootElement: HTMLElement): void {\n    const viewId = this.viewId || Object.values(this.viewports)[0]?.id || 'default-view';\n    const widgetViewport = this.viewports[viewId];\n    const [rz, rx] = this.getRotation(widgetViewport);\n\n    const ui = (\n      <div className=\"deck-widget-button\" style={{perspective: 100}}>\n        <button\n          type=\"button\"\n          onClick={() => {\n            for (const viewport of Object.values(this.viewports)) {\n              this.handleCompassReset(viewport);\n            }\n          }}\n          title={this.props.label}\n          style={{transform: `rotateX(${rx}deg)`}}\n        >\n          <svg fill=\"none\" width=\"100%\" height=\"100%\" viewBox=\"0 0 26 26\">\n            <g transform={`rotate(${rz},13,13)`}>\n              <path\n                d=\"M10 13.0001L12.9999 5L15.9997 13.0001H10Z\"\n                fill=\"var(--icon-compass-north-color, rgb(240, 92, 68))\"\n              />\n              <path\n                d=\"M16.0002 12.9999L13.0004 21L10.0005 12.9999H16.0002Z\"\n                fill=\"var(--icon-compass-south-color, rgb(204, 204, 204))\"\n              />\n            </g>\n          </svg>\n        </button>\n      </div>\n    );\n\n    render(ui, rootElement);\n  }\n\n  onViewportChange(viewport: Viewport) {\n    // no need to update if viewport is the same\n    if (!viewport.equals(this.viewports[viewport.id])) {\n      this.viewports[viewport.id] = viewport;\n      this.updateHTML();\n    }\n  }\n\n  getRotation(viewport?: Viewport) {\n    if (viewport instanceof WebMercatorViewport) {\n      return [-viewport.bearing, viewport.pitch];\n    } else if (viewport instanceof _GlobeViewport) {\n      return [0, Math.max(-80, Math.min(80, viewport.latitude))];\n    }\n    return [0, 0];\n  }\n\n  handleCompassReset(viewport: Viewport) {\n    const viewId = this.viewId || viewport.id || 'default-view';\n    if (viewport instanceof WebMercatorViewport) {\n      const nextViewState = {\n        ...viewport,\n        bearing: 0,\n        ...(this.getRotation(viewport)[0] === 0 ? {pitch: 0} : {}),\n        transitionDuration: this.props.transitionDuration,\n        transitionInterpolator: new FlyToInterpolator()\n      };\n      // @ts-ignore Using private method temporary until there's a public one\n      this.deck._onViewStateChange({viewId, viewState: nextViewState, interactionState: {}});\n    }\n  }\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport type {WidgetPlacement, Viewport, WidgetProps} from '@deck.gl/core';\nimport {render} from 'preact';\nimport {Widget} from '@deck.gl/core';\n\nexport type ScaleWidgetProps = WidgetProps & {\n  /** Widget positioning within the view. Default 'bottom-left'. */\n  placement?: WidgetPlacement;\n  /** Label for the scale widget */\n  label?: string;\n  /** View to attach to and interact with. Required when using multiple views */\n  viewId?: string | null;\n};\n\n/**\n * A scale widget that displays a Google Mapslike scale indicator.\n * Instead of text inside a div, this widget renders an SVG that contains a horizontal line\n * with two vertical tick marks (extending upward from the line only) and a pretty distance label\n * positioned to the left of the line. The horizontal lines length is computed from a nice\n * candidate distance (e.g. 200, 500, 1000 m, etc.) so that its pixel width is between 100 and 200.\n */\nexport class ScaleWidget extends Widget<ScaleWidgetProps> {\n  static defaultProps: Required<ScaleWidgetProps> = {\n    ...Widget.defaultProps,\n    id: 'scale',\n    placement: 'bottom-left',\n    label: 'Scale',\n    viewId: null\n  };\n\n  className = 'deck-widget-scale';\n  placement: WidgetPlacement = 'bottom-left';\n\n  // The pixel width of the scale line (computed from a candidate distance)\n  scaleWidth: number = 10;\n  // The candidate distance (in meters) corresponding to the scale line length.\n  scaleValue: number = 0;\n  // The formatted distance label (e.g. \"200 m\" or \"1.0 km\")\n  scaleText: string = '';\n\n  constructor(props: ScaleWidgetProps = {}) {\n    super(props);\n    this.setProps(this.props);\n  }\n\n  setProps(props: Partial<ScaleWidgetProps>): void {\n    this.placement = props.placement ?? this.placement;\n    this.viewId = props.viewId ?? this.viewId;\n    super.setProps(props);\n  }\n\n  onRenderHTML(rootElement: HTMLElement): void {\n    // Reserve space for the text label (to the left of the horizontal line)\n    const lineOffsetX = 50;\n    // Overall SVG width includes the left offset plus the computed scale line width.\n    const svgWidth = lineOffsetX + this.scaleWidth;\n    const tickHeight = 10; // vertical tick extends upward by 10 pixels from the horizontal line\n    render(\n      <svg\n        className=\"deck-widget-scale\"\n        width={svgWidth}\n        height={30}\n        style={{overflow: 'visible', background: 'transparent'}}\n        onClick={this.handleClick.bind(this)}\n      >\n        {/* Pretty distance label positioned to the left of the horizontal line */}\n        <text\n          x={lineOffsetX + 5}\n          y=\"10\"\n          textAnchor=\"end\"\n          alignmentBaseline=\"middle\"\n          style={{fontSize: '16px', fill: 'black', fontWeight: 'bold', fontFamily: 'sans-serif'}}\n        >\n          {this.scaleText}\n        </text>\n        {/* Horizontal line */}\n        <line\n          x1={lineOffsetX}\n          y1=\"15\"\n          x2={lineOffsetX + this.scaleWidth}\n          y2=\"15\"\n          stroke=\"black\"\n          strokeWidth=\"6\"\n        />\n        {/* Left vertical tick (extending upward from the horizontal line) */}\n        <line\n          x1={lineOffsetX}\n          y1=\"15\"\n          x2={lineOffsetX}\n          y2={15 - tickHeight}\n          stroke=\"black\"\n          strokeWidth=\"6\"\n        />\n        {/* Right vertical tick (extending upward from the horizontal line) */}\n        <line\n          x1={lineOffsetX + this.scaleWidth}\n          y1=\"15\"\n          x2={lineOffsetX + this.scaleWidth}\n          y2={15 - tickHeight}\n          stroke=\"black\"\n          strokeWidth=\"6\"\n        />\n      </svg>,\n      rootElement\n    );\n  }\n\n  onViewportChange(viewport: Viewport): void {\n    // Only handle geospatial viewports (which contain latitude)\n    if (!('latitude' in viewport)) return;\n\n    const {latitude, zoom} = viewport as {latitude: number; zoom: number};\n    const metersPerPixel = getMetersPerPixel(latitude, zoom);\n    const {candidate, candidatePixels} = computeScaleCandidate(metersPerPixel);\n\n    this.scaleValue = candidate;\n    this.scaleWidth = candidatePixels;\n    // Format the candidate distance for display (using km if >= 1000 m)\n    if (candidate >= 1000) {\n      this.scaleText = `${(candidate / 1000).toFixed(1)} km`;\n    } else {\n      this.scaleText = `${candidate} m`;\n    }\n    this.updateHTML();\n  }\n\n  handleClick(): void {}\n}\n\n/**\n * Compute the meters per pixel at a given latitude and zoom level.\n *\n * @param latitude - The current latitude.\n * @param zoom - The current zoom level.\n * @returns The number of meters per pixel.\n */\nfunction getMetersPerPixel(latitude: number, zoom: number): number {\n  const earthCircumference = 40075016.686;\n  return (earthCircumference * Math.cos((latitude * Math.PI) / 180)) / Math.pow(2, zoom + 8);\n}\n\n/**\n * Compute a \"nice\" scale candidate such that the scale bar width in pixels is between 100 and 200.\n * The candidate distance (in meters) will be one of a set of round numbers (100, 200, 500, 1000, 2000, 5000, etc.).\n *\n * @param metersPerPixel - The number of meters per pixel at the current zoom/latitude.\n * @returns An object containing the candidate distance and its width in pixels.\n */\nfunction computeScaleCandidate(metersPerPixel: number): {\n  candidate: number;\n  candidatePixels: number;\n} {\n  const minPixels = 100;\n  const maxPixels = 200;\n  const targetPixels = (minPixels + maxPixels) / 2;\n  const targetDistance = targetPixels * metersPerPixel;\n\n  const exponent = Math.floor(Math.log10(targetDistance));\n  const base = Math.pow(10, exponent);\n  const multipliers = [1, 2, 5];\n\n  let candidate = multipliers[0] * base;\n  let candidatePixels = candidate / metersPerPixel;\n\n  for (let i = 0; i < multipliers.length; i++) {\n    const currentCandidate = multipliers[i] * base;\n    const currentPixels = currentCandidate / metersPerPixel;\n    if (currentPixels >= minPixels && currentPixels <= maxPixels) {\n      candidate = currentCandidate;\n      candidatePixels = currentPixels;\n      break;\n    }\n    if (currentPixels > maxPixels) {\n      candidate = i > 0 ? multipliers[i - 1] * base : currentCandidate;\n      candidatePixels = candidate / metersPerPixel;\n      break;\n    }\n    if (i === multipliers.length - 1 && currentPixels < minPixels) {\n      candidate = multipliers[0] * base * 10;\n      candidatePixels = candidate / metersPerPixel;\n    }\n  }\n  return {candidate, candidatePixels};\n}\n", "import { options as _options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\n// Cast to use internal Options type\nconst options = /** @type {import('./internal').Options} */ (_options);\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\nlet oldRoot = options._root;\n\n// We take the minimum timeout for requestAnimationFrame to ensure that\n// the callback is invoked after the next frame. 35ms is based on a 30hz\n// refresh rate, which is the minimum rate for a smooth user experience.\nconst RAF_TIMEOUT = 35;\nlet prevRaf;\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._root = (vnode, parentDom) => {\n\tif (vnode && parentDom._children && parentDom._children._mask) {\n\t\tvnode._mask = parentDom._children._mask;\n\t}\n\n\tif (oldRoot) oldRoot(vnode, parentDom);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingArgs = hookItem._nextValue = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\n// TODO: Improve typing of commitQueue parameter\n/** @type {(vnode: import('./internal').VNode, commitQueue: any) => void} */\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\n\treturn hooks._list[index];\n}\n\n/**\n * @template {unknown} S\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} [initialState]\n * @returns {[S, (state: S) => void]}\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @template {unknown} S\n * @template {unknown} A\n * @param {import('./index').Reducer<S, A>} reducer\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ S, (state: S) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\t/** @type {(x: import('./internal').HookState) => x is import('./internal').ReducerHookState} */\n\t\t\t\tconst isStateHook = x => !!x._component;\n\t\t\t\tconst stateHooks =\n\t\t\t\t\thookState._component.__hooks._list.filter(isStateHook);\n\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = hookState._component.props !== p;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn prevScu\n\t\t\t\t\t? prevScu.call(this, p, s, c) || shouldUpdate\n\t\t\t\t\t: shouldUpdate;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\n/** @type {(initialValue: unknown) => unknown} */\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tconst result = ref(createHandle());\n\t\t\t\treturn () => {\n\t\t\t\t\tref(null);\n\t\t\t\t\tif (result && typeof result == 'function') result();\n\t\t\t\t};\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @template {unknown} T\n * @param {() => T} factory\n * @param {unknown[]} args\n * @returns {T}\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState<T>} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = factory();\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {unknown[]} args\n * @returns {() => void}\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(\n\t\t\tformatter ? formatter(value) : /** @type {any}*/ (value)\n\t\t);\n\t}\n}\n\n/**\n * @param {(error: unknown, errorInfo: import('preact').ErrorInfo) => void} cb\n * @returns {[unknown, () => void]}\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/** @type {() => string} */\nexport function useId() {\n\t/** @type {import('./internal').IdHookState} */\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n * @returns {void}\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').HookState} hook\n * @returns {void}\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n * @returns {void}\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {unknown[]} oldArgs\n * @param {unknown[]} newArgs\n * @returns {boolean}\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\n/**\n * @template Arg\n * @param {Arg} arg\n * @param {(arg: Arg) => any} f\n * @returns {any}\n */\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {type JSX} from 'preact';\nimport {useState, useRef, useEffect} from 'preact/hooks';\n\nexport type DropdownMenuProps = {\n  menuItems: string[];\n  onSelect: (value: string) => void;\n  style?: JSX.CSSProperties;\n};\n\nexport const DropdownMenu = (props: DropdownMenuProps) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  const toggleDropdown = () => setIsOpen(!isOpen);\n\n  const handleClickOutside = (event: MouseEvent) => {\n    if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n      setIsOpen(false);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  const handleSelect = (value: string) => {\n    props.onSelect(value);\n    setIsOpen(false);\n  };\n\n  return (\n    <div\n      className=\"dropdown-container\"\n      ref={dropdownRef}\n      style={{\n        position: 'relative',\n        display: 'inline-block',\n        ...props.style\n      }}\n    >\n      <button\n        onClick={toggleDropdown}\n        style={{\n          width: '30px',\n          height: '30px',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          border: '1px solid #ccc',\n          borderRadius: '4px',\n          background: '#fff',\n          cursor: 'pointer',\n          padding: 0\n        }}\n      >\n        \n      </button>\n      {isOpen && (\n        <ul\n          style={{\n            position: 'absolute',\n            top: '100%',\n            right: '100%',\n            background: '#fff',\n            border: '1px solid #ccc',\n            borderRadius: '4px',\n            listStyle: 'none',\n            padding: '4px 0',\n            margin: 0,\n            zIndex: 1000,\n            minWidth: '200px'\n          }}\n        >\n          {props.menuItems.map(item => (\n            <li\n              key={item}\n              onClick={() => handleSelect(item)}\n              style={{\n                padding: '4px 8px',\n                cursor: 'pointer',\n                whiteSpace: 'nowrap'\n              }}\n            >\n              {item}\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {type Geocoder} from './geocoder';\n\nconst CURRENT_LOCATION = 'current';\nconst LOCAL_STORAGE_KEY = 'deck-geocoder-history';\n\nexport type GeocoderHistoryProps = {\n  maxEntries?: number;\n};\n\n/**\n * An internal, experimental helper class for storing a list of locations in local storage.\n * @todo Remove the UI related state.\n */\nexport class GeocoderHistory {\n  props: Required<GeocoderHistoryProps>;\n  addressText = '';\n  errorText = '';\n  addressHistory: string[] = [];\n\n  constructor(props: GeocoderHistoryProps) {\n    this.props = {maxEntries: 5, ...props};\n    this.addressHistory = this.loadPreviousAddresses();\n  }\n\n  /** PErform geocoding */\n  async geocode(geocoder: Geocoder, address: string, apiKey: string) {\n    this.errorText = '';\n    this.addressText = address;\n    try {\n      const coordinates = await geocoder.geocode(address, apiKey);\n      if (coordinates) {\n        this.storeAddress(this.addressText);\n        return coordinates;\n      }\n      this.errorText = 'Invalid address';\n    } catch (error) {\n      this.errorText = `${(error as Error).message}`;\n    }\n    return null;\n  }\n\n  loadPreviousAddresses(): string[] {\n    try {\n      const stored = window.localStorage.getItem(LOCAL_STORAGE_KEY);\n      const list = stored && JSON.parse(stored);\n      const addresses = Array.isArray(list)\n        ? list.filter((v): v is string => typeof v === 'string')\n        : [];\n      return addresses;\n    } catch {\n      // ignore\n    }\n    return [];\n  }\n\n  storeAddress(address: string) {\n    const cleaned = address.trim();\n    if (!cleaned || cleaned === CURRENT_LOCATION) {\n      return;\n    }\n    const deduped = [cleaned, ...this.addressHistory.filter(a => a !== cleaned)];\n    this.addressHistory = deduped.slice(0, this.props.maxEntries);\n    try {\n      window.localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(this.addressHistory));\n    } catch {\n      // ignore\n    }\n  }\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {type Geocoder} from './geocoder';\n\nconst GOOGLE_URL = 'https://maps.googleapis.com/maps/api/geocode/json';\nconst MAPBOX_URL = 'https://api.mapbox.com/geocoding/v5/mapbox.places';\nconst OPENCAGE_API_URL = 'https://api.opencagedata.com/geocode/v1/json';\n\n/**\n * A geocoder that uses the google geocoding service\n * @note Requires an API key from Google\n * @see https://developers.google.com/maps/documentation/geocoding/get-api-key\n */\nexport const GoogleGeocoder = {\n  name: 'google',\n  requiresApiKey: true,\n  async geocode(\n    address: string,\n    apiKey: string\n  ): Promise<{longitude: number; latitude: number} | null> {\n    const encodedAddress = encodeURIComponent(address);\n    const json = await fetchJson(`${GOOGLE_URL}?address=${encodedAddress}&key=${apiKey}`);\n\n    switch (json.status) {\n      case 'OK':\n        const loc = json.results.length > 0 && json.results[0].geometry.location;\n        return loc ? {longitude: loc.lng, latitude: loc.lat} : null;\n      default:\n        throw new Error(`Google Geocoder failed: ${json.status}`);\n    }\n  }\n} as const satisfies Geocoder;\n\n/**\n * A geocoder that uses the google geocoding service\n * @note Requires an API key from Mapbox\n * @see https://docs.mapbox.com/api/search/geocoding/\n */\nexport const MapboxGeocoder = {\n  name: 'google',\n  requiresApiKey: true,\n  async geocode(\n    address: string,\n    apiKey: string\n  ): Promise<{longitude: number; latitude: number} | null> {\n    const encodedAddress = encodeURIComponent(address);\n    const json = await fetchJson(`${MAPBOX_URL}/${encodedAddress}.json?access_token=${apiKey}`);\n\n    if (Array.isArray(json.features) && json.features.length > 0) {\n      const center = json.features[0].center;\n      if (Array.isArray(center) && center.length >= 2) {\n        return {longitude: center[0], latitude: center[1]};\n      }\n    }\n    return null;\n  }\n} as const satisfies Geocoder;\n\n/**\n * A geocoder that uses the google geocoding service\n * @note Requires an API key from OpenCageData\n * @see https://opencagedata.com/api\n */\nexport const OpenCageGeocoder = {\n  name: 'opencage',\n  requiresApiKey: true,\n  async geocode(\n    address: string,\n    key: string\n  ): Promise<{longitude: number; latitude: number} | null> {\n    const encodedAddress = encodeURIComponent(address);\n    const data = await fetchJson(`${OPENCAGE_API_URL}?q=${encodedAddress}&key=${key}`);\n    if (Array.isArray(data.results) && data.results.length > 0) {\n      const geometry = data.results[0].geometry;\n      return {longitude: geometry.lng, latitude: geometry.lat};\n    }\n    return null;\n  }\n} as const satisfies Geocoder;\n\n/**\n * A geocoder adapter that wraps the browser's geolocation API. Always returns the user's current location.\n * @note Not technically a geocoder, but a geolocation service that provides a source of locations.\n * @note The user must allow location access for this to work.\n */\nexport const CurrentLocationGeocoder = {\n  name: 'current',\n  requiresApiKey: false,\n  /** Attempt to call browsers geolocation API */\n  async geocode(): Promise<{longitude: number; latitude: number} | null> {\n    if (!navigator.geolocation) {\n      throw new Error('Geolocation not supported');\n    }\n    return new Promise((resolve, reject) => {\n      navigator.geolocation.getCurrentPosition(\n        /** @see https://developer.mozilla.org/docs/Web/API/GeolocationPosition */\n        (position: GeolocationPosition) => {\n          const {longitude, latitude} = position.coords;\n          resolve({longitude, latitude});\n        },\n        /** @see https://developer.mozilla.org/docs/Web/API/GeolocationPositionError */\n        (error: GeolocationPositionError) => reject(new Error(error.message))\n      );\n    });\n  }\n} as const satisfies Geocoder;\n\n/** Fetch JSON, catching HTTP errors */\nasync function fetchJson(url: string): Promise<any> {\n  let response: Response;\n  try {\n    response = await fetch(url);\n  } catch (error) {\n    // Annoyingly, fetch reports some errors (e.g. CORS) using excpetions, not response.ok\n    throw new Error(`CORS error? ${error}. ${url}: `);\n  }\n  if (!response.ok) {\n    throw new Error(`${response.statusText}. ${url}: `);\n  }\n  const data = await response.json();\n  if (!data) {\n    throw new Error(`No data returned. ${url}`);\n  }\n  return data;\n}\n\n/**\n * Parse a coordinate string.\n * Supports comma- or semicolon-separated values.\n * Heuristically determines which value is longitude and which is latitude.\n */\nexport const CoordinatesGeocoder = {\n  name: 'coordinates',\n  requiresApiKey: false,\n  placeholderLocation: `-122.45, 37.8 or 3748'N, 12227'W`,\n  async geocode(address: string): Promise<{longitude: number; latitude: number} | null> {\n    return parseCoordinates(address) || null;\n  }\n} as const satisfies Geocoder;\n\n/**\n * Parse an input string for coordinates.\n * Supports comma- or semicolon-separated values.\n * Heuristically determines which value is longitude and which is latitude.\n */\nfunction parseCoordinates(input) {\n  input = input.trim();\n  const parts = input.split(/[,;]/).map(p => p.trim());\n  if (parts.length < 2) return null;\n  const first = parseCoordinatePart(parts[0]);\n  const second = parseCoordinatePart(parts[1]);\n  if (first === null || second === null) return null;\n  // Use a heuristic:\n  // If one number exceeds 90 in absolute value, it's likely a longitude.\n  if (Math.abs(first) > 90 && Math.abs(second) <= 90) {\n    return {longitude: first, latitude: second};\n  } else if (Math.abs(second) > 90 && Math.abs(first) <= 90) {\n    return {longitude: second, latitude: first};\n  }\n  // If both are <= 90, assume order: latitude, longitude.\n  return {latitude: first, longitude: second};\n}\n\n/**\n * Parse a single coordinate part (which may be in decimal or DMS format).\n */\nfunction parseCoordinatePart(s: string): number | null {\n  s = s.trim();\n  // If the string contains a degree symbol or similar markers, use DMS parsing.\n  if (s.includes('') || s.includes(\"'\") || s.includes('\"')) {\n    const value = dmsToDecimal(s);\n    return isNaN(value) ? null : value;\n  }\n  // Otherwise, check for a cardinal letter and remove it.\n  let sign = 1;\n  if (/[SW]/i.test(s)) sign = -1;\n  s = s.replace(/[NSEW]/gi, '');\n  const value = parseFloat(s);\n  return isNaN(value) ? null : sign * value;\n}\n\n/** Convert a DMS string (e.g. \"3748'00\\\"N\") to decimal degrees. */\nfunction dmsToDecimal(s: string): number {\n  // A simple regex to extract degrees, minutes, seconds and direction.\n  const regex = /(\\d+)[d]\\s*(\\d+)?['m]?\\s*(\\d+(?:\\.\\d+)?)?[\\\"s]?\\s*([NSEW])?/i;\n  const match = s.match(regex);\n  if (!match) return NaN;\n  const degrees = parseFloat(match[1]) || 0;\n  const minutes = parseFloat(match[2]) || 0;\n  const seconds = parseFloat(match[3]) || 0;\n  const direction = match[4] || '';\n  let dec = degrees + minutes / 60 + seconds / 3600;\n  if (/[SW]/i.test(direction)) {\n    dec = -dec;\n  }\n  return dec;\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {Widget} from '@deck.gl/core';\nimport type {WidgetPlacement, Viewport, WidgetProps} from '@deck.gl/core';\nimport {FlyToInterpolator, LinearInterpolator} from '@deck.gl/core';\nimport {render} from 'preact';\nimport {DropdownMenu} from './lib/components/dropdown-menu';\nimport {type Geocoder} from './lib/geocode/geocoder';\nimport {GeocoderHistory} from './lib/geocode/geocoder-history';\nimport {\n  GoogleGeocoder,\n  MapboxGeocoder,\n  OpenCageGeocoder,\n  CoordinatesGeocoder,\n  CurrentLocationGeocoder\n} from './lib/geocode/geocoders';\n\n/** @todo - is the the best we can do? */\ntype ViewState = Record<string, unknown>;\n\nconst CURRENT_LOCATION = 'current';\n\n/** Properties for the GeocoderWidget */\nexport type GeocoderWidgetProps = WidgetProps & {\n  viewId?: string | null;\n  /** Widget positioning within the view. Default 'top-left'. */\n  placement?: WidgetPlacement;\n  /** Tooltip message */\n  label?: string;\n  /** View state reset transition duration in ms. 0 disables the transition */\n  transitionDuration?: number;\n  /** Geocoding service selector, for declarative usage */\n  geocoder?: 'google' | 'mapbox' | 'opencage' | 'coordinates' | 'custom';\n  /** Custom geocoding service (Used when geocoder = 'custom') */\n  customGeocoder?: Geocoder;\n  /** API key used for geocoding services */\n  apiKey?: string;\n  /** Whether to use geolocation @note Experimental*/\n  _geolocation?: boolean;\n};\n\n/**\n * A widget that display a text box that lets user type in a location\n * and a button that moves the view to that location.\n * @todo For now only supports coordinates, Could be extended with location service integrations.\n */\nexport class GeocoderWidget extends Widget<GeocoderWidgetProps> {\n  static defaultProps: Required<GeocoderWidgetProps> = {\n    ...Widget.defaultProps,\n    id: 'geocoder',\n    viewId: null,\n    placement: 'top-left',\n    label: 'Geocoder',\n    transitionDuration: 200,\n    geocoder: 'coordinates',\n    customGeocoder: CoordinatesGeocoder,\n    apiKey: '',\n    _geolocation: false\n  };\n\n  className = 'deck-widget-geocoder';\n  placement: WidgetPlacement = 'top-left';\n\n  geocodeHistory = new GeocoderHistory({});\n  addressText: string = '';\n  geocoder: Geocoder = CoordinatesGeocoder;\n\n  constructor(props: GeocoderWidgetProps = {}) {\n    super(props);\n    this.setProps(this.props);\n  }\n\n  setProps(props: Partial<GeocoderWidgetProps>): void {\n    this.placement = props.placement ?? this.placement;\n    this.viewId = props.viewId ?? this.viewId;\n    this.geocoder = getGeocoder(this.props);\n    if (this.geocoder.requiresApiKey && !this.props.apiKey) {\n      throw new Error(`API key is required for the ${this.geocoder.name} geocoder`);\n    }\n    super.setProps(props);\n  }\n\n  onRenderHTML(rootElement: HTMLElement): void {\n    const menuItems = this.props._geolocation\n      ? [CURRENT_LOCATION, ...this.geocodeHistory.addressHistory]\n      : [...this.geocodeHistory.addressHistory];\n    render(\n      <div\n        className=\"deck-widget-geocoder\"\n        style={{\n          pointerEvents: 'auto',\n          display: 'flex',\n          alignItems: 'center',\n          flexWrap: 'wrap' // Allows wrapping on smaller screens\n        }}\n      >\n        <input\n          type=\"text\"\n          placeholder={this.geocoder.placeholderLocation ?? 'Enter address or location'}\n          value={this.geocodeHistory.addressText}\n          // @ts-expect-error event type\n          onInput={e => this.setInput(e.target?.value || '')}\n          onKeyPress={this.handleKeyPress}\n          style={{\n            flex: '1 1 auto',\n            minWidth: '200px',\n            margin: 0,\n            padding: '8px',\n            boxSizing: 'border-box'\n          }}\n        />\n        <DropdownMenu\n          menuItems={menuItems}\n          onSelect={this.handleSelect}\n          style={{\n            margin: 2,\n            padding: '4px 2px',\n            boxSizing: 'border-box'\n          }}\n        />\n        {this.geocodeHistory.errorText && (\n          <div className=\"error\">{this.geocodeHistory.errorText}</div>\n        )}\n      </div>,\n      rootElement\n    );\n  }\n\n  setInput = (text: string) => {\n    this.addressText = text;\n  };\n\n  handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  };\n\n  handleSelect = (address: string) => {\n    this.setInput(address);\n    this.handleSubmit();\n  };\n\n  /** Sync wrapper for async geocode() */\n  handleSubmit = () => {\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    this.geocode(this.addressText);\n  };\n\n  /** Perform geocoding */\n  geocode: (address: string) => Promise<void> = async address => {\n    const useGeolocation = this.props._geolocation && address === CURRENT_LOCATION;\n    const geocoder = useGeolocation ? CurrentLocationGeocoder : this.geocoder;\n    const coordinates = await this.geocodeHistory.geocode(\n      geocoder,\n      this.addressText,\n      this.props.apiKey\n    );\n    if (coordinates) {\n      this.setViewState(coordinates);\n    }\n  };\n\n  // TODO - MOVE TO WIDGETIMPL?\n  setViewState(viewState: ViewState) {\n    const viewId = this.props.viewId || (viewState?.id as string) || 'default-view';\n    const viewport = this.viewports[viewId] || {};\n    const nextViewState: ViewState = {\n      ...viewport,\n      ...viewState\n    };\n    if (this.props.transitionDuration > 0) {\n      nextViewState.transitionDuration = this.props.transitionDuration;\n      nextViewState.transitionInterpolator =\n        'latitude' in nextViewState ? new FlyToInterpolator() : new LinearInterpolator();\n    }\n\n    // @ts-ignore Using private method temporary until there's a public one\n    this.deck._onViewStateChange({viewId, viewState: nextViewState, interactionState: {}});\n  }\n\n  onViewportChange(viewport: Viewport) {\n    this.viewports[viewport.id] = viewport;\n  }\n\n  viewports: Record<string, Viewport> = {};\n}\n\nfunction getGeocoder(props: {geocoder?: string; customGeocoder?: Geocoder}): Geocoder {\n  switch (props.geocoder) {\n    case 'google':\n      return GoogleGeocoder;\n    case 'mapbox':\n      return MapboxGeocoder;\n    case 'opencage':\n      return OpenCageGeocoder;\n    case 'coordinates':\n      return CoordinatesGeocoder;\n    case 'custom':\n      if (!props.customGeocoder) {\n        throw new Error('Custom geocoder is not defined');\n      }\n      return props.customGeocoder;\n    default:\n      throw new Error(`Unknown geocoder: ${props.geocoder}`);\n  }\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\n/* global document */\nimport {log, Widget, type WidgetProps, type WidgetPlacement} from '@deck.gl/core';\nimport {render} from 'preact';\nimport {IconButton} from './lib/components/icon-button';\n\n/* eslint-enable max-len */\n\nexport type FullscreenWidgetProps = WidgetProps & {\n  id?: string;\n  /** Widget positioning within the view. Default 'top-left'. */\n  placement?: WidgetPlacement;\n  /** View to attach to and interact with. Required when using multiple views. */\n  viewId?: string | null;\n  /** Tooltip message when out of fullscreen. */\n  enterLabel?: string;\n  /** Tooltip message when fullscreen. */\n  exitLabel?: string;\n  /**\n   * A compatible DOM element which should be made full screen. By default, the map container element will be made full screen.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullScreen#Compatible_elements\n   */\n  container?: HTMLElement;\n};\n\nexport class FullscreenWidget extends Widget<FullscreenWidgetProps> {\n  static defaultProps: Required<FullscreenWidgetProps> = {\n    ...Widget.defaultProps,\n    id: 'fullscreen',\n    placement: 'top-left',\n    viewId: null,\n    enterLabel: 'Enter Fullscreen',\n    exitLabel: 'Exit Fullscreen',\n    container: undefined!\n  };\n\n  className = 'deck-widget-fullscreen';\n  placement: WidgetPlacement = 'top-left';\n  fullscreen: boolean = false;\n\n  constructor(props: FullscreenWidgetProps = {}) {\n    super(props);\n    this.setProps(this.props);\n  }\n\n  onAdd(): void {\n    document.addEventListener('fullscreenchange', this.onFullscreenChange.bind(this));\n  }\n\n  onRemove() {\n    document.removeEventListener('fullscreenchange', this.onFullscreenChange.bind(this));\n  }\n\n  onRenderHTML(rootElement: HTMLElement): void {\n    render(\n      <IconButton\n        onClick={() => {\n          this.handleClick().catch(err => log.error(err)());\n        }}\n        label={this.fullscreen ? this.props.exitLabel : this.props.enterLabel}\n        className={this.fullscreen ? 'deck-widget-fullscreen-exit' : 'deck-widget-fullscreen-enter'}\n      />,\n      rootElement\n    );\n  }\n\n  setProps(props: Partial<FullscreenWidgetProps>) {\n    this.placement = props.placement ?? this.placement;\n    this.viewId = props.viewId ?? this.viewId;\n    super.setProps(props);\n  }\n\n  getContainer() {\n    return this.props.container || this.deck?.getCanvas()?.parentElement;\n  }\n\n  onFullscreenChange() {\n    const prevFullscreen = this.fullscreen;\n    const fullscreen = document.fullscreenElement === this.getContainer();\n    if (prevFullscreen !== fullscreen) {\n      this.fullscreen = !this.fullscreen;\n    }\n    this.updateHTML();\n  }\n\n  async handleClick() {\n    if (this.fullscreen) {\n      await this.exitFullscreen();\n    } else {\n      await this.requestFullscreen();\n    }\n    this.updateHTML();\n  }\n\n  async requestFullscreen() {\n    const container = this.getContainer();\n    if (container?.requestFullscreen) {\n      await container.requestFullscreen({navigationUI: 'hide'});\n    } else {\n      this.togglePseudoFullscreen();\n    }\n  }\n\n  async exitFullscreen() {\n    if (document.exitFullscreen) {\n      await document.exitFullscreen();\n    } else {\n      this.togglePseudoFullscreen();\n    }\n  }\n\n  togglePseudoFullscreen() {\n    this.getContainer()?.classList.toggle('deck-pseudo-fullscreen');\n  }\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {h, render} from 'preact';\nimport {useState, useRef} from 'preact/hooks';\nimport {Widget, type WidgetProps} from '@deck.gl/core';\n\n/** Properties for the SplitterWidget */\nexport type SplitterWidgetProps = WidgetProps & {\n  /** The view id for the first (resizable) view */\n  viewId1: string;\n  /** The view id for the second view */\n  viewId2: string;\n  /** Orientation of the splitter: vertical (default) or horizontal */\n  orientation?: 'vertical' | 'horizontal';\n  /** The initial split percentage (0 to 1) for the first view, default 0.5 */\n  initialSplit?: number;\n  /** Callback invoked when the splitter is dragged with the new split value */\n  onChange?: (newSplit: number) => void;\n  /** Callback invoked when dragging starts */\n  onDragStart?: () => void;\n  /** Callback invoked when dragging ends */\n  onDragEnd?: () => void;\n};\n\n/**\n * A draggable splitter widget that appears as a vertical or horizontal line\n * across the deck.gl canvas. It positions itself based on the split percentage\n * of the first view and provides callbacks when dragged.\n */\nexport class SplitterWidget extends Widget<SplitterWidgetProps> {\n  static defaultProps: Required<SplitterWidgetProps> = {\n    ...Widget.defaultProps,\n    id: 'splitter-widget',\n    viewId1: '',\n    viewId2: '',\n    orientation: 'vertical',\n    initialSplit: 0.5,\n    onChange: () => {},\n    onDragStart: () => {},\n    onDragEnd: () => {}\n  };\n\n  className = 'deck-widget-splitter';\n  placement = 'fill' as const;\n\n  constructor(props: SplitterWidgetProps) {\n    super(props);\n  }\n\n  setProps(props: Partial<SplitterWidgetProps>) {\n    super.setProps(props);\n  }\n\n  onRenderHTML(rootElement: HTMLElement): void {\n    // Ensure the widget container fills the deck.gl canvas.\n    // TODO - Move styling to CSS\n    rootElement.style.position = 'absolute';\n    rootElement.style.top = '0';\n    rootElement.style.left = '0';\n    rootElement.style.width = '100%';\n    rootElement.style.height = '100%';\n    rootElement.style.margin = '0px';\n\n    render(\n      <Splitter\n        orientation={this.props.orientation}\n        initialSplit={this.props.initialSplit}\n        onChange={this.props.onChange}\n        onDragStart={this.props.onDragStart}\n        onDragEnd={this.props.onDragEnd}\n      />,\n      rootElement\n    );\n  }\n}\n\n/**\n * A functional component that renders a draggable splitter line.\n * It computes its position based on the provided split percentage and\n * updates it during mouse drag events.\n */\nfunction Splitter({\n  orientation,\n  initialSplit,\n  onChange,\n  onDragStart,\n  onDragEnd\n}: {\n  orientation: 'vertical' | 'horizontal';\n  initialSplit: number;\n  onChange?: (newSplit: number) => void;\n  onDragStart?: () => void;\n  onDragEnd?: () => void;\n}) {\n  const [split, setSplit] = useState(initialSplit);\n  const dragging = useRef(false);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const handleDragStart = (event: MouseEvent) => {\n    dragging.current = true;\n    onDragStart?.();\n    document.addEventListener('mousemove', handleDragging);\n    document.addEventListener('mouseup', handleDragEnd);\n    event.preventDefault();\n  };\n\n  const handleDragging = (event: MouseEvent) => {\n    if (!dragging.current || !containerRef.current) return;\n    const rect = containerRef.current.getBoundingClientRect();\n    let newSplit: number;\n    if (orientation === 'vertical') {\n      newSplit = (event.clientX - rect.left) / rect.width;\n    } else {\n      newSplit = (event.clientY - rect.top) / rect.height;\n    }\n    // Clamp newSplit between 5% and 95%\n    newSplit = Math.min(Math.max(newSplit, 0.05), 0.95);\n    setSplit(newSplit);\n    onChange?.(newSplit);\n  };\n\n  const handleDragEnd = (event: MouseEvent) => {\n    if (!dragging.current) return;\n    dragging.current = false;\n    onDragEnd?.();\n    document.removeEventListener('mousemove', handleDragging);\n    document.removeEventListener('mouseup', handleDragEnd);\n  };\n\n  // The splitter line style based on orientation and the current split percentage.\n  const splitterStyle: h.JSX.CSSProperties =\n    orientation === 'vertical'\n      ? {\n          position: 'absolute',\n          top: 0,\n          bottom: 0,\n          left: `${split * 100}%`,\n          width: '4px',\n          cursor: 'col-resize',\n          background: '#ccc',\n          zIndex: 10,\n          pointerEvents: 'auto',\n          boxShadow: 'inset -1px 0 0 white, inset 1px 0 0 white'\n        }\n      : {\n          position: 'absolute',\n          left: 0,\n          right: 0,\n          top: `${split * 100}%`,\n          height: '4px',\n          cursor: 'row-resize',\n          background: '#ccc',\n          zIndex: 10,\n          pointerEvents: 'auto',\n          boxShadow: 'inset -1px 0 0 white, inset 1px 0 0 white'\n        };\n\n  // Container style to fill the entire deck.gl canvas.\n  const containerStyle: h.JSX.CSSProperties = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0\n  };\n\n  return (\n    <div ref={containerRef} style={containerStyle}>\n      <div\n        style={splitterStyle}\n        onMouseDown={handleDragStart as h.JSX.MouseEventHandler<HTMLElement>} // Use the appropriate Preact event type.\n      />\n    </div>\n  );\n}\n", "import type {JSX} from 'preact';\nimport {useState, useRef, useEffect} from 'preact/hooks';\nimport {IconButton} from './icon-button';\nimport {ButtonGroup} from './button-group';\nimport {GroupedIconButton} from './grouped-icon-button';\n\nexport type IconMenuProps<KeyType = string> = {\n  className: string;\n  icon?: JSX.Element;\n  label?: string;\n  menuItems: {value: KeyType; icon: JSX.Element; label: string}[];\n  initialItem: KeyType;\n  onItemSelected: (item: KeyType) => void;\n};\n\n/** A component that renders an icon popup menu */\nexport function IconMenu<KeyType extends string>(props: IconMenuProps<KeyType>) {\n  const [menuOpen, setMenuOpen] = useState(false);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Close the menu when clicking outside.\n  const handleClickOutside = (event: MouseEvent) => {\n    if (containerRef.current && !containerRef.current.contains(event.target as Node)) {\n      setMenuOpen(false);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [containerRef]);\n\n  const [selectedItem, setSelectedItem] = useState<KeyType>(props.initialItem);\n\n  const handleSelectItem = (item: KeyType) => {\n    setSelectedItem(item);\n    setMenuOpen(false);\n    props.onItemSelected(item);\n  };\n\n  const handleButtonClick = () => setMenuOpen(!menuOpen);\n\n  const selectedMenuItem = props.menuItems.find(item => item.value === selectedItem);\n  const label = props.label || selectedMenuItem?.label || '';\n  const icon = (props.icon || selectedMenuItem?.icon)!;\n\n  return (\n    <div style={{position: 'relative', display: 'inline-block'}} ref={containerRef}>\n      <IconButton className={props.className} label={label} onClick={handleButtonClick}>\n        {icon}\n      </IconButton>\n      {menuOpen && (\n        <div className=\"deck-widget-icon-menu\">\n          <ButtonGroup orientation=\"vertical\">\n            {props.menuItems.map(item => (\n              <GroupedIconButton\n                key={item.value}\n                label={item.label}\n                onClick={() => handleSelectItem(item.value)}\n              >\n                {item.icon}\n              </GroupedIconButton>\n            ))}\n          </ButtonGroup>\n        </div>\n      )}\n    </div>\n  );\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {render, JSX} from 'preact';\nimport {Widget, type WidgetProps, type WidgetPlacement} from '@deck.gl/core';\nimport {IconMenu} from './lib/components/icon-menu';\n\n/** The available view modes */\nexport type ViewMode = 'single' | 'split-horizontal' | 'split-vertical';\n\n/** Properties for the ViewSelectorWidget */\nexport type ViewSelectorWidgetProps = WidgetProps & {\n  /** Widget positioning within the view. Default 'top-left'. */\n  placement?: WidgetPlacement;\n  /** View to attach to and interact with. Required when using multiple views. */\n  viewId?: string | null;\n  /** Tooltip label */\n  label?: string;\n  /** The initial view mode. Defaults to 'single'. */\n  initialViewMode?: ViewMode;\n  /** Callback invoked when the view mode changes */\n  onViewModeChange?: (mode: ViewMode) => void;\n};\n\n/**\n * A widget that renders a popup menu for selecting a view mode.\n * It displays a button with the current view mode icon. Clicking the button\n * toggles a popup that shows three icons for:\n * - Single view\n * - Two views, split horizontally\n * - Two views, split vertically\n */\nexport class ViewSelectorWidget extends Widget<ViewSelectorWidgetProps> {\n  static defaultProps: Required<ViewSelectorWidgetProps> = {\n    ...Widget.defaultProps,\n    id: 'view-selector',\n    placement: 'top-left',\n    viewId: null,\n    label: 'Split View',\n    initialViewMode: 'single',\n    onViewModeChange: () => {}\n  };\n\n  className = 'deck-widget-view-selector';\n  placement: WidgetPlacement = 'top-left';\n  viewMode: ViewMode;\n\n  constructor(props: ViewSelectorWidgetProps = {}) {\n    super(props);\n    this.viewMode = this.props.initialViewMode;\n    this.setProps(this.props);\n  }\n\n  setProps(props: Partial<ViewSelectorWidgetProps>) {\n    this.placement = props.placement ?? this.placement;\n    this.viewId = props.viewId ?? this.viewId;\n    super.setProps(props);\n  }\n\n  onRenderHTML(rootElement: HTMLElement) {\n    render(\n      <IconMenu<ViewMode>\n        className=\"deck-widget-view-selector\"\n        menuItems={MENU_ITEMS.map(item => ({\n          ...item,\n          icon: item.icon()\n        }))}\n        initialItem={this.props.initialViewMode}\n        onItemSelected={this.handleSelectMode}\n      />,\n      rootElement\n    );\n  }\n\n  handleSelectMode = (viewMode: ViewMode) => {\n    this.viewMode = viewMode;\n    this.updateHTML();\n    this.props.onViewModeChange(viewMode);\n  };\n}\n\nconst ICON_STYLE = {width: '24px', height: '24px'};\n\n// JSX wrapped in a function to fix deck's Node tests\nconst ICONS: Record<ViewMode, () => JSX.Element> = {\n  single: () => (\n    <svg width=\"24\" height=\"24\" style={ICON_STYLE}>\n      <rect\n        x=\"4\"\n        y=\"4\"\n        width=\"16\"\n        height=\"16\"\n        stroke=\"var(--button-icon-hover, rgb(24, 24, 26))\"\n        fill=\"none\"\n        strokeWidth=\"2\"\n      />\n    </svg>\n  ),\n  'split-horizontal': () => (\n    <svg width=\"24\" height=\"24\" style={ICON_STYLE}>\n      <rect\n        x=\"4\"\n        y=\"4\"\n        width=\"16\"\n        height=\"7\"\n        stroke=\"var(--button-icon-hover, rgb(24, 24, 26))\"\n        fill=\"none\"\n        strokeWidth=\"2\"\n      />\n      <rect\n        x=\"4\"\n        y=\"13\"\n        width=\"16\"\n        height=\"7\"\n        stroke=\"var(--button-icon-hover, rgb(24, 24, 26))\"\n        fill=\"none\"\n        strokeWidth=\"2\"\n      />\n    </svg>\n  ),\n  'split-vertical': () => (\n    <svg width=\"24\" height=\"24\" style={ICON_STYLE}>\n      <rect\n        x=\"4\"\n        y=\"4\"\n        width=\"7\"\n        height=\"16\"\n        stroke=\"var(--button-icon-hover, rgb(24, 24, 26))\"\n        fill=\"none\"\n        strokeWidth=\"2\"\n      />\n      <rect\n        x=\"13\"\n        y=\"4\"\n        width=\"7\"\n        height=\"16\"\n        stroke=\"var(--button-icon-hover, rgb(24, 24, 26))\"\n        fill=\"none\"\n        strokeWidth=\"2\"\n      />\n    </svg>\n  )\n};\n\n// Define menu items for the popup menu.\nconst MENU_ITEMS: Array<{value: ViewMode; icon: () => JSX.Element; label: string}> = [\n  {value: 'single', icon: ICONS.single, label: 'Single View'},\n  {value: 'split-horizontal', icon: ICONS['split-horizontal'], label: 'Split Horizontal'},\n  {value: 'split-vertical', icon: ICONS['split-vertical'], label: 'Split Vertical'}\n];\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {Widget} from '@deck.gl/core';\nimport type {Deck, PickingInfo, Viewport, WidgetProps} from '@deck.gl/core';\nimport {render, JSX} from 'preact';\n\nexport type InfoWidgetProps = WidgetProps & {\n  /** View to attach to and interact with. Required when using multiple views */\n  viewId?: string | null;\n  /** Determines the interaction mode of the widget */\n  mode: 'click' | 'hover' | 'static';\n  /** Function to generate the popup contents from the selected element */\n  getTooltip?: (info: PickingInfo, widget: InfoWidget) => InfoWidgetProps | null;\n  /** Position at which to place popup (clicked point: [longitude, latitude]) */\n  position: [number, number];\n  /** Text content of popup */\n  text?: string;\n  /** Visibility of info widget */\n  visible?: boolean;\n  /** Minimum offset (in pixels) to keep the popup away from the canvas edges. */\n  minOffset?: number;\n  /** Callback triggered when the widget is clicked. */\n  onClick?: (widget: InfoWidget, info: PickingInfo) => boolean;\n};\n\nexport class InfoWidget extends Widget<InfoWidgetProps> {\n  static defaultProps: Required<InfoWidgetProps> = {\n    ...Widget.defaultProps,\n    id: 'info',\n    position: [0, 0],\n    text: '',\n    visible: false,\n    minOffset: 0,\n    viewId: null,\n    mode: 'hover',\n    getTooltip: undefined!,\n    onClick: undefined!\n  };\n\n  className = 'deck-widget-info';\n  placement = 'fill' as const;\n  viewport?: Viewport;\n\n  constructor(props: InfoWidgetProps) {\n    super(props);\n    this.setProps(this.props);\n  }\n\n  setProps(props: Partial<InfoWidgetProps>) {\n    this.viewId = props.viewId ?? this.viewId;\n    super.setProps(props);\n  }\n\n  onCreateRootElement(): HTMLDivElement {\n    const element = super.onCreateRootElement();\n    const style = {margin: '0px', top: '0px', left: '0px', position: 'absolute'};\n    Object.entries(style).forEach(([key, value]) => element.style.setProperty(key, value));\n    return element;\n  }\n\n  onViewportChange(viewport) {\n    this.viewport = viewport;\n    this.updateHTML();\n  }\n\n  onHover(info: PickingInfo): void {\n    if (this.props.mode === 'hover' && this.props.getTooltip) {\n      const tooltip = this.props.getTooltip(info, this);\n      // hover tooltips should show over static and click infos\n      this.setProps({\n        visible: tooltip !== null,\n        ...tooltip,\n        style: {zIndex: '1', ...tooltip?.style}\n      });\n    }\n  }\n\n  onClick(info: PickingInfo): boolean {\n    if (this.props.mode === 'click' && this.props.getTooltip) {\n      const tooltip = this.props.getTooltip(info, this);\n      this.setProps({\n        visible: tooltip !== null,\n        ...tooltip\n      });\n      return tooltip !== null;\n    }\n\n    // Original behavior\n    return this.props.onClick?.(this, info) || false;\n  }\n\n  onAdd({deck, viewId}: {deck: Deck<any>; viewId: string | null}) {\n    this.deck = deck;\n    if (!viewId) {\n      this.viewport = deck.getViewports()[0];\n    } else {\n      this.viewport = deck.getViewports().find(viewport => viewport.id === viewId);\n    }\n  }\n\n  onRenderHTML(rootElement: HTMLElement): void {\n    if (!this.viewport) {\n      return;\n    }\n    const [longitude, latitude] = this.props.position;\n    // Project the clicked geographic coordinate to canvas (x, y)\n    const [x, y] = this.viewport.project([longitude, latitude]);\n\n    const minOffset = this.props.minOffset || 0;\n    const gap = 10; // gap between clicked point and popup box\n    const arrowHeight = 8; // height of the triangle arrow\n    const arrowWidth = 16; // full width of the arrow\n\n    // Decide vertical orientation.\n    // If the clicked point is in the bottom half, place the popup above the point.\n    const isAbove = y > this.viewport.height / 2;\n    const background = (this.props.style && this.props.style.background) || 'rgba(255,255,255,0.9)';\n\n    // Render the popup container with a content box and a placeholder for the arrow.\n    // The container is positioned absolutely (initially at 0,0) and will be repositioned after measuring.\n    const ui = this.props.visible ? (\n      <div className=\"popup-container\" style={{position: 'absolute', left: 0, top: 0}}>\n        <div\n          className=\"popup-content\"\n          style={{\n            background,\n            padding: '10px',\n            position: 'relative',\n            // Include any additional styles\n            ...(this.props.style as JSX.CSSProperties)\n          }}\n        >\n          {this.props.text}\n        </div>\n        <div className=\"popup-arrow\" style={{position: 'absolute', width: '0px', height: '0px'}} />\n      </div>\n    ) : null;\n    render(ui, rootElement);\n\n    // After rendering, measure the content and adjust positioning so that:\n    // - The popup (with its arrow) does not cover the clicked point.\n    // - The arrow's tip points to the clicked point.\n    // - The popup remains within the canvas bounds, with minOffset.\n    // eslint-disable-next-line max-statements, complexity\n    requestAnimationFrame(() => {\n      if (!this.props.visible || !rootElement.firstChild || !this.viewport) return;\n\n      const container = rootElement.firstChild as HTMLElement;\n      const contentEl = container.querySelector('.popup-content') as HTMLElement;\n      const arrowEl = container.querySelector('.popup-arrow') as HTMLElement;\n      if (!contentEl || !arrowEl) return;\n      const contentRect = contentEl.getBoundingClientRect();\n      const popupWidth = contentRect.width;\n      const popupHeight = contentRect.height;\n\n      // Compute ideal horizontal position: center the popup on the clicked x\n      let computedLeft = x - popupWidth / 2;\n      // Compute vertical position based on orientation:\n      // If the popup is above, position its bottom edge (minus arrow & gap) at the clicked y.\n      // Otherwise, position its top edge (plus arrow & gap) at the clicked y.\n      let computedTop;\n      if (isAbove) {\n        computedTop = y - gap - arrowHeight - popupHeight;\n      } else {\n        computedTop = y + gap + arrowHeight;\n      }\n\n      // Ensure the popup (content) stays within horizontal bounds of the canvas\n      if (computedLeft < minOffset) {\n        computedLeft = minOffset;\n      }\n      if (computedLeft + popupWidth > this.viewport.width - minOffset) {\n        computedLeft = this.viewport.width - minOffset - popupWidth;\n      }\n\n      // Ensure the vertical position (including the arrow) stays within canvas bounds.\n      if (isAbove) {\n        if (computedTop < minOffset) {\n          computedTop = minOffset;\n        }\n      } else if (computedTop + popupHeight + arrowHeight > this.viewport.height - minOffset) {\n        computedTop = this.viewport.height - minOffset - popupHeight - arrowHeight;\n      }\n\n      // Update container position (remove any transform and set left/top explicitly)\n      container.style.left = `${computedLeft}px`;\n      container.style.top = `${computedTop}px`;\n      container.style.transform = '';\n\n      // Compute arrow's horizontal offset relative to the container.\n      // We want the arrow's tip to align with the clicked point.\n      let arrowLeft = x - computedLeft - arrowWidth / 2;\n      // Optionally constrain arrowLeft so it stays within the popup's width.\n      arrowLeft = Math.max(arrowLeft, 0);\n      arrowLeft = Math.min(arrowLeft, popupWidth - arrowWidth);\n\n      // Update arrow element's style based on orientation.\n      if (isAbove) {\n        // Popup is above the clicked point so arrow appears at the bottom of the popup.\n        arrowEl.style.left = `${arrowLeft}px`;\n        arrowEl.style.bottom = `-${arrowHeight}px`;\n        arrowEl.style.top = '';\n        arrowEl.style.borderLeft = `${arrowWidth / 2}px solid transparent`;\n        arrowEl.style.borderRight = `${arrowWidth / 2}px solid transparent`;\n        arrowEl.style.borderTop = `${arrowHeight}px solid ${background}`;\n        arrowEl.style.borderBottom = '';\n      } else {\n        // Popup is below the clicked point so arrow appears at the top.\n        arrowEl.style.left = `${arrowLeft}px`;\n        arrowEl.style.top = `-${arrowHeight}px`;\n        arrowEl.style.bottom = '';\n        arrowEl.style.borderLeft = `${arrowWidth / 2}px solid transparent`;\n        arrowEl.style.borderRight = `${arrowWidth / 2}px solid transparent`;\n        arrowEl.style.borderBottom = `${arrowHeight}px solid ${background}`;\n        arrowEl.style.borderTop = '';\n      }\n    });\n  }\n}\n", "import type {JSX} from 'preact';\n\nconst MENU_STYLE: JSX.CSSProperties = {\n  position: 'absolute',\n  top: '100%',\n  left: 0,\n  background: 'white',\n  border: '1px solid #ccc',\n  borderRadius: '4px',\n  marginTop: 'var(--menu-gap, 4px)',\n  zIndex: 100\n};\n\nconst MENU_ITEM_STYLE: JSX.CSSProperties = {\n  background: 'white',\n  border: 'none',\n  padding: '4px',\n  cursor: 'pointer',\n  pointerEvents: 'auto'\n};\n\nexport type SimpleMenuProps = {\n  menuItems: {key: string; label: string}[];\n  onItemSelected: (key: string) => void;\n  position: {x: number; y: number};\n  style?: JSX.CSSProperties;\n};\n\n/** Renders a simple dropdown menu at an arbitrary position */\nexport const SimpleMenu = (props: SimpleMenuProps) => {\n  const {menuItems, onItemSelected, position, style} = props;\n  const styleOverride: JSX.CSSProperties = {\n    ...MENU_STYLE,\n    ...style,\n    left: `${position.x}px`,\n    top: `${position.y}px`\n  };\n\n  return (\n    <div style={styleOverride}>\n      {menuItems.map(({key, label}) => (\n        <button\n          key={key}\n          style={{...MENU_ITEM_STYLE, display: 'block'}}\n          onClick={_ => onItemSelected(key)}\n        >\n          {label}\n        </button>\n      ))}\n    </div>\n  );\n};\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\n/* global document */\nimport {Widget} from '@deck.gl/core';\nimport type {Deck, PickingInfo, WidgetProps} from '@deck.gl/core';\nimport {render} from 'preact';\nimport {SimpleMenu} from './lib/components/simple-menu';\n\n/** The standard, modern way is to use event.button === 2, where button is the standardized property (0 = left, 1 = middle, 2 = right). */\nconst MOUSE_BUTTON_RIGHT = 2;\n/** A name for the legacy MouseEvent.which value that corresponds to the right-mouse button. In older browsers, the check is: if (event.which === 3) */\nconst MOUSE_WHICH_RIGHT = 3;\n\nexport type ContextWidgetMenuItem = {\n  label: string;\n  key: string;\n};\n\nexport type ContextMenuWidgetProps = WidgetProps & {\n  /** View to attach to and interact with. Required when using multiple views. */\n  viewId?: string | null;\n  /** Controls visibility of the context menu */\n  visible?: boolean;\n  /** Screen position at which to place the menu */\n  position: {x: number; y: number};\n  /** Items to render */\n  menuItems: ContextWidgetMenuItem[];\n  /** Provide menu items for the menu given the picked object */\n  getMenuItems: (info: PickingInfo, widget: ContextMenuWidget) => ContextWidgetMenuItem[] | null;\n  /** Callback with the selected item */\n  onMenuItemSelected?: (key: string, pickInfo: PickingInfo | null) => void;\n};\n\nexport class ContextMenuWidget extends Widget<ContextMenuWidgetProps> {\n  static defaultProps: Required<ContextMenuWidgetProps> = {\n    ...Widget.defaultProps,\n    id: 'context',\n    viewId: null,\n    visible: false,\n    position: {x: 0, y: 0},\n    getMenuItems: undefined!,\n    menuItems: [],\n    // eslint-disable-next-line no-console\n    onMenuItemSelected: (key, pickInfo) => console.log('Context menu item selected:', key, pickInfo)\n  };\n\n  className = 'deck-widget-context-menu';\n  placement = 'fill' as const;\n\n  pickInfo: PickingInfo | null = null;\n\n  constructor(props: ContextMenuWidgetProps) {\n    super(props);\n    this.pickInfo = null;\n    this.setProps(this.props);\n  }\n\n  onAdd({deck}: {deck: Deck<any>}): HTMLDivElement {\n    const element = document.createElement('div');\n    element.classList.add('deck-widget', 'deck-widget-context-menu');\n    const style = {\n      margin: '0px',\n      top: '0px',\n      left: '0px',\n      position: 'absolute',\n      pointerEvents: 'auto'\n    };\n    Object.entries(style).forEach(([key, value]) => element.style.setProperty(key, value));\n\n    deck.getCanvas()?.addEventListener('click', () => this.hide());\n    deck.getCanvas()?.addEventListener('contextmenu', event => this.handleContextMenu(event));\n    return element;\n  }\n\n  onRenderHTML(rootElement: HTMLElement): void {\n    const {visible, position, menuItems} = this.props;\n\n    const ui =\n      visible && menuItems.length ? (\n        <SimpleMenu\n          menuItems={menuItems}\n          onItemSelected={key => this.props.onMenuItemSelected(key, this.pickInfo)}\n          position={position}\n          style={{pointerEvents: 'auto'}}\n        />\n      ) : null;\n    render(ui, rootElement);\n  }\n\n  handleContextMenu(srcEvent: MouseEvent): boolean {\n    if (\n      srcEvent &&\n      (srcEvent.button === MOUSE_BUTTON_RIGHT || srcEvent.which === MOUSE_WHICH_RIGHT)\n    ) {\n      this.pickInfo =\n        this.deck?.pickObject({\n          x: srcEvent.clientX,\n          y: srcEvent.clientY\n        }) || null;\n      const menuItems = (this.pickInfo && this.props.getMenuItems?.(this.pickInfo, this)) || [];\n      const visible = menuItems.length > 0;\n      this.setProps({\n        visible,\n        position: {x: srcEvent.clientX, y: srcEvent.clientY},\n        menuItems\n      });\n      this.updateHTML();\n      srcEvent.preventDefault();\n      return visible;\n    }\n\n    return false;\n  }\n\n  hide(): void {\n    this.setProps({visible: false});\n  }\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {Widget, type WidgetPlacement, type WidgetProps} from '@deck.gl/core';\nimport {render} from 'preact';\nimport {IconButton} from './lib/components/icon-button';\n\nexport type TimelineWidgetProps = WidgetProps & {\n  /** Widget positioning within the view. Default 'bottom-left'. */\n  placement?: WidgetPlacement;\n  /** View to attach to and interact with. Required when using multiple views. */\n  viewId?: string | null;\n  /** Slider timeRange [min, max]. */\n  timeRange?: [number, number];\n  /** Slider step. */\n  step?: number;\n  /** Initial slider value. */\n  initialTime?: number;\n  /** Callback when value changes. */\n  onTimeChange?: (value: number) => void;\n  /** Play interval in milliseconds. */\n  playInterval?: number;\n};\n\nexport class TimelineWidget extends Widget<TimelineWidgetProps> {\n  id = 'timeline';\n  className = 'deck-widget-timeline';\n  placement: WidgetPlacement = 'bottom-left';\n\n  private playing = false;\n  private timerId: number | null = null;\n  currentTime: number;\n\n  static defaultProps: Required<TimelineWidgetProps> = {\n    ...Widget.defaultProps,\n    id: 'timeline',\n    placement: 'bottom-left',\n    viewId: null,\n    timeRange: [0, 100],\n    step: 1,\n    initialTime: undefined!,\n    onTimeChange: () => {},\n    playInterval: 1000\n  };\n\n  constructor(props: TimelineWidgetProps = {}) {\n    super(props);\n    this.currentTime = this.props.initialTime ?? this.props.timeRange[0];\n    this.setProps(this.props);\n  }\n\n  setProps(props: Partial<TimelineWidgetProps>): void {\n    this.placement = props.placement ?? this.placement;\n    this.viewId = props.viewId ?? this.viewId;\n    super.setProps(props);\n  }\n\n  onAdd(): void {\n    this.playing = false;\n    this.timerId = null;\n  }\n\n  onRemove(): void {\n    this.stop();\n  }\n\n  onRenderHTML(rootElement: HTMLElement): void {\n    render(\n      <div style={{display: 'flex', alignItems: 'center', pointerEvents: 'auto'}}>\n        <IconButton label={this.playing ? 'Pause' : 'Play'} onClick={this.handlePlayPause}>\n          <div className=\"text\">{this.playing ? '' : ''}</div>\n        </IconButton>\n        <input\n          type=\"range\"\n          className=\"timeline-slider\"\n          min={this.props.timeRange[0]}\n          max={this.props.timeRange[1]}\n          step={this.props.step}\n          value={this.currentTime}\n          onInput={this.handleSliderChange}\n        />\n      </div>,\n      rootElement\n    );\n  }\n\n  private handlePlayPause = (): void => {\n    if (this.playing) {\n      this.stop();\n    } else {\n      this.start();\n    }\n  };\n\n  private handleSliderChange = (e: Event): void => {\n    const input = e.target as HTMLInputElement;\n    const val = Number(input.value);\n    this.currentTime = val;\n    this.props.onTimeChange(val);\n    this.updateHTML();\n  };\n\n  private start(): void {\n    this.playing = true;\n    this.updateHTML();\n    this.tick();\n  }\n\n  private stop(): void {\n    this.playing = false;\n    if (this.timerId !== null) {\n      window.clearTimeout(this.timerId);\n      this.timerId = null;\n    }\n    this.updateHTML();\n  }\n\n  private tick = (): void => {\n    const [min, max] = this.props.timeRange;\n    let next = this.currentTime + this.props.step;\n    if (next > max) {\n      next = min;\n    }\n    this.currentTime = next;\n    this.props.onTimeChange(next);\n    this.updateHTML();\n    if (this.playing) {\n      this.timerId = window.setTimeout(this.tick, this.props.playInterval);\n    }\n  };\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\n/* global document */\nimport type {WidgetPlacement, WidgetProps} from '@deck.gl/core';\nimport {render} from 'preact';\nimport {Widget} from '@deck.gl/core';\nimport {IconButton} from './lib/components/icon-button';\n\n/** Properties for the ScreenshotWidget */\nexport type ScreenshotWidgetProps = WidgetProps & {\n  /** Widget positioning within the view. Default 'top-left'. */\n  placement?: WidgetPlacement;\n  /** View to attach to and interact with. Required when using multiple views. */\n  viewId?: string | null;\n  /** Tooltip message */\n  label?: string;\n  /** Filename to save to */\n  filename?: string;\n  /** Image format */\n  imageFormat?: 'image/png' | 'image/jpeg';\n  /** Callback, if defined user overrides the capture logic */\n  onCapture?: (widget: ScreenshotWidget) => void;\n};\n\n/**\n * A button widget that captures a screenshot of the current canvas and downloads it as a (png) file.\n * @note only captures canvas contents, not HTML DOM or CSS styles\n */\nexport class ScreenshotWidget extends Widget<ScreenshotWidgetProps> {\n  static defaultProps: Required<ScreenshotWidgetProps> = {\n    ...Widget.defaultProps,\n    id: 'screenshot',\n    placement: 'top-left',\n    viewId: null,\n    label: 'Screenshot',\n    filename: 'screenshot.png',\n    imageFormat: 'image/png',\n    onCapture: undefined!\n  };\n\n  className = 'deck-widget-screenshot';\n  placement: WidgetPlacement = 'top-left';\n\n  constructor(props: ScreenshotWidgetProps = {}) {\n    super(props);\n    this.setProps(this.props);\n  }\n\n  setProps(props: Partial<ScreenshotWidgetProps>) {\n    this.placement = props.placement ?? this.placement;\n    this.viewId = props.viewId ?? this.viewId;\n    super.setProps(props);\n  }\n\n  onRenderHTML(rootElement: HTMLElement): void {\n    render(\n      <IconButton\n        className=\"deck-widget-camera\"\n        label={this.props.label}\n        onClick={this.handleClick.bind(this)}\n      />,\n      rootElement\n    );\n  }\n\n  handleClick() {\n    // Allow user to override the capture logic\n    if (this.props.onCapture) {\n      this.props.onCapture(this);\n      return;\n    }\n    const dataURL = this.captureScreenToDataURL(this.props.imageFormat);\n    if (dataURL) {\n      this.downloadDataURL(dataURL, this.props.filename);\n    }\n  }\n\n  /** @note only captures canvas contents, not HTML DOM or CSS styles */\n  captureScreenToDataURL(imageFormat: string): string | undefined {\n    const canvas = this.deck?.getCanvas();\n    return canvas?.toDataURL(imageFormat);\n  }\n\n  /** Download a data URL */\n  downloadDataURL(dataURL: string, filename: string): void {\n    const link = document.createElement('a');\n    link.href = dataURL;\n    link.download = filename;\n    link.click();\n  }\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\n/**\n * A Deck Theme is a set of CSS variables that control CSS styling of the official widgets.\n */\nexport type DeckWidgetTheme = {\n  // layout\n  '--widget-margin'?: string;\n  // button and button group\n  '--button-size'?: string;\n  '--button-corner-radius'?: string;\n  '--button-background'?: string;\n  '--button-stroke'?: string;\n  '--button-inner-stroke'?: string;\n  '--button-shadow'?: string;\n  '--button-backdrop-filter'?: string;\n  '--button-icon-idle'?: string;\n  '--button-icon-hover'?: string;\n  '--button-text'?: string;\n  // inter-icon color\n  '--icon-compass-north-color'?: string;\n  '--icon-compass-south-color'?: string;\n  // menu\n  '--menu-gap'?: string;\n};\n\nexport const LightTheme = {\n  '--widget-margin': '12px',\n  '--button-size': '28px',\n  '--button-corner-radius': '8px',\n  '--button-background': '#fff',\n  '--button-stroke': 'rgba(255, 255, 255, 0.3)',\n  '--button-inner-stroke': 'unset',\n  '--button-shadow': '0px 0px 8px 0px rgba(0, 0, 0, 0.25)',\n  '--button-backdrop-filter': 'unset',\n  '--button-icon-idle': 'rgba(97, 97, 102, 1)',\n  '--button-icon-hover': 'rgba(24, 24, 26, 1)',\n  '--button-text': 'rgb(24, 24, 26, 1)',\n  '--icon-compass-north-color': 'rgb(240, 92, 68)',\n  '--icon-compass-south-color': 'rgb(204, 204, 204)',\n  '--menu-gap': '4px'\n} as const satisfies Required<DeckWidgetTheme>;\n\nexport const DarkTheme = {\n  '--widget-margin': '12px',\n  '--button-size': '28px',\n  '--button-corner-radius': '8px',\n  '--button-background': 'rgba(18, 18, 20, 1)',\n  '--button-stroke': 'rgba(18, 18, 20, 0.30)',\n  '--button-inner-stroke': 'unset',\n  '--button-shadow': '0px 0px 8px 0px rgba(0, 0, 0, 0.25)',\n  '--button-backdrop-filter': 'unset',\n  '--button-icon-idle': 'rgba(158, 157, 168, 1)',\n  '--button-icon-hover': 'rgba(215, 214, 229, 1)',\n  '--button-text': 'rgb(215, 214, 229, 1)',\n  '--icon-compass-north-color': 'rgb(240, 92, 68)',\n  '--icon-compass-south-color': 'rgb(200, 199, 209)',\n  '--menu-gap': '4px'\n} as const satisfies Required<DeckWidgetTheme>;\n\nexport const LightGlassTheme = {\n  '--widget-margin': '12px',\n  '--button-size': '28px',\n  '--button-corner-radius': '8px',\n  '--button-background': 'rgba(255, 255, 255, 0.6)',\n  '--button-stroke': 'rgba(255, 255, 255, 0.3)',\n  '--button-inner-stroke': '1px solid rgba(255, 255, 255, 0.6)',\n  '--button-shadow':\n    '0px 0px 8px 0px rgba(0, 0, 0, 0.25), 0px 0px 8px 0px rgba(0, 0, 0, 0.1) inset',\n  '--button-backdrop-filter': 'blur(4px)',\n  '--button-icon-idle': 'rgba(97, 97, 102, 1)',\n  '--button-icon-hover': 'rgba(24, 24, 26, 1)',\n  '--button-text': 'rgb(24, 24, 26, 1)',\n  '--icon-compass-north-color': 'rgb(240, 92, 68)',\n  '--icon-compass-south-color': 'rgb(204, 204, 204)',\n  '--menu-gap': '4px'\n} as const satisfies Required<DeckWidgetTheme>;\n\nexport const DarkGlassTheme = {\n  '--widget-margin': '12px',\n  '--button-size': '28px',\n  '--button-corner-radius': '8px',\n  '--button-background': 'rgba(18, 18, 20, 0.75)',\n  '--button-stroke': 'rgba(18, 18, 20, 0.30)',\n  '--button-inner-stroke': '1px solid rgba(18, 18, 20, 0.75)',\n  '--button-shadow':\n    '0px 0px 8px 0px rgba(0, 0, 0, 0.25), 0px 0px 8px 0px rgba(0, 0, 0, 0.1) inset',\n  '--button-backdrop-filter': 'blur(4px)',\n  '--button-icon-idle': 'rgba(158, 157, 168, 1)',\n  '--button-icon-hover': 'rgba(215, 214, 229, 1)',\n  '--button-text': 'rgb(215, 214, 229, 1)',\n  '--icon-compass-north-color': 'rgb(240, 92, 68)',\n  '--icon-compass-south-color': 'rgb(200, 199, 209)',\n  '--menu-gap': '4px'\n} as const satisfies Required<DeckWidgetTheme>;\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {log, _deepEqual as deepEqual, _applyStyles as applyStyles} from '@deck.gl/core';\nimport {Widget, type WidgetProps, type WidgetPlacement} from '@deck.gl/core';\nimport {render} from 'preact';\n// import {useCallback} from 'preact/hooks';\nimport {IconButton} from './lib/components/icon-button';\nimport type {DeckWidgetTheme} from './themes';\nimport {LightGlassTheme, DarkGlassTheme} from './themes';\n\nexport type ThemeWidgetProps = WidgetProps & {\n  /** Widget positioning within the view. Default 'top-left'. */\n  placement?: WidgetPlacement;\n  /** View to attach to and interact with. Required when using multiple views. */\n  viewId?: string | null;\n  /** Tooltip message when dark mode is selected. */\n  lightModeLabel?: string;\n  /** Styles for light mode theme */\n  lightModeTheme?: DeckWidgetTheme;\n  /** Tooltip message when light mode is selected. */\n  darkModeLabel?: string;\n  /** Styles for dark mode theme */\n  darkModeTheme?: DeckWidgetTheme;\n  /** Initial theme mode. 'auto' reads the browser default setting */\n  initialThemeMode?: 'auto' | 'light' | 'dark';\n};\n\nexport class ThemeWidget extends Widget<ThemeWidgetProps> {\n  static defaultProps: Required<ThemeWidgetProps> = {\n    ...Widget.defaultProps,\n    id: 'theme',\n    placement: 'top-left',\n    viewId: null,\n    lightModeLabel: 'Light Mode',\n    lightModeTheme: LightGlassTheme,\n    darkModeLabel: 'Dark Mode',\n    darkModeTheme: DarkGlassTheme,\n    initialThemeMode: 'auto'\n  };\n\n  className = 'deck-widget-theme';\n  placement: WidgetPlacement = 'top-left';\n  themeMode: 'light' | 'dark' = 'dark';\n\n  constructor(props: ThemeWidgetProps = {}) {\n    super(props);\n    this.themeMode = this._getInitialThemeMode();\n    this.setProps(this.props);\n  }\n\n  // eslint-disable-next-line complexity\n  setProps(props: Partial<ThemeWidgetProps>) {\n    const {lightModeTheme, darkModeTheme} = this.props;\n    this.placement = props.placement ?? this.placement;\n    this.viewId = props.viewId ?? this.viewId;\n    super.setProps(props);\n\n    switch (this.themeMode) {\n      case 'light':\n        if (props.lightModeTheme && !deepEqual(props.lightModeTheme, lightModeTheme, 1)) {\n          this._setThemeMode('light');\n        }\n        break;\n      case 'dark':\n        if (props.darkModeTheme && !deepEqual(props.darkModeTheme, darkModeTheme, 1)) {\n          this._setThemeMode('dark');\n        }\n        break;\n      default:\n        log.warn(`Invalid theme mode ${this.themeMode}`)();\n    }\n  }\n\n  onRenderHTML(rootElement: HTMLElement): void {\n    const {lightModeLabel, darkModeLabel} = this.props;\n    // const onClick = useCallback(this._handleClick.bind(this), [this._handleClick]);\n\n    render(\n      <IconButton\n        onClick={this._handleClick.bind(this)}\n        label={this.themeMode === 'dark' ? darkModeLabel : lightModeLabel}\n        className={this.themeMode === 'dark' ? 'deck-widget-moon' : 'deck-widget-sun'}\n      />,\n      rootElement\n    );\n  }\n\n  onAdd() {\n    // Note: theme styling is applied in here onAdd() once DOM element is created\n    this._setThemeMode(this.themeMode);\n  }\n\n  _handleClick() {\n    const newThemeMode = this.themeMode === 'dark' ? 'light' : 'dark';\n    this._setThemeMode(newThemeMode);\n  }\n\n  _setThemeMode(themeMode: 'light' | 'dark') {\n    this.themeMode = themeMode;\n    const container = this.rootElement?.closest<HTMLDivElement>('.deck-widget-container');\n    if (container) {\n      const themeStyle =\n        themeMode === 'dark' ? this.props.darkModeTheme : this.props.lightModeTheme;\n      applyStyles(container, themeStyle);\n\n      const label =\n        this.themeMode === 'dark' ? this.props.darkModeLabel : this.props.lightModeLabel;\n      log.log(1, `Switched theme to ${label}`, themeStyle)();\n\n      this.updateHTML();\n    }\n  }\n\n  /** Read browser preference */\n  _getInitialThemeMode(): 'light' | 'dark' {\n    const {initialThemeMode} = this.props;\n    return initialThemeMode === 'auto'\n      ? window.matchMedia('(prefers-color-scheme: dark)').matches\n        ? 'dark'\n        : 'light'\n      : initialThemeMode;\n  }\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport type {WidgetPlacement, Layer, WidgetProps} from '@deck.gl/core';\nimport {render} from 'preact';\nimport {Widget} from '@deck.gl/core';\nimport {IconButton} from './lib/components/icon-button';\n\n/** Properties for the LoadingWidget */\nexport type LoadingWidgetProps = WidgetProps & {\n  /** Widget positioning within the view. Default 'top-left'. */\n  placement?: WidgetPlacement;\n  /** View to attach to and interact with. Required when using multiple views */\n  viewId?: string | null;\n  /** Tooltip message when loading */\n  label?: string;\n};\n\n/**\n * A non-interactive widget that shows a loading spinner if any layers are loading data\n */\nexport class LoadingWidget extends Widget<LoadingWidgetProps> {\n  static defaultProps: Required<LoadingWidgetProps> = {\n    ...Widget.defaultProps,\n    id: 'loading',\n    placement: 'top-left',\n    viewId: null,\n    label: 'Loading layer data'\n  };\n\n  className = 'deck-widget-loading';\n  placement: WidgetPlacement = 'top-left';\n  loading = true;\n\n  constructor(props: LoadingWidgetProps = {}) {\n    super(props);\n    this.setProps(this.props);\n  }\n\n  setProps(props: Partial<LoadingWidgetProps>) {\n    this.placement = props.placement ?? this.placement;\n    this.viewId = props.viewId ?? this.viewId;\n    super.setProps(props);\n  }\n\n  onRenderHTML(rootElement: HTMLElement): void {\n    render(\n      // TODO(ibgreen) - this should not be a button, but styling is so nested that it is easier to reuse this component.\n      this.loading && (\n        <IconButton\n          className=\"deck-widget-spinner\"\n          label={this.props.label}\n          onClick={this.handleClick.bind(this)}\n        />\n      ),\n      rootElement\n    );\n  }\n\n  onRedraw({layers}: {layers: Layer[]}): void {\n    const loading = layers.some(layer => !layer.isLoaded);\n    if (loading !== this.loading) {\n      this.loading = loading;\n      this.updateHTML();\n    }\n  }\n\n  // TODO(ibgreen) - this should not be a button, see above.\n  handleClick() {}\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {Widget} from '@deck.gl/core';\nimport {render} from 'preact';\nimport type {WidgetPlacement, Deck, WidgetProps} from '@deck.gl/core';\nimport {IconButton} from './lib/components/icon-button';\n\n/** Properties for the FpsWidget. */\nexport type FpsWidgetProps = WidgetProps & {\n  /** Widget positioning within the view. Default 'top-left'. */\n  placement?: WidgetPlacement;\n  /** View to attach to and interact with. Required when using multiple views. */\n  viewId?: string | null;\n};\n\n/**\n * Displays the average frames per second reported by the Deck instance.\n */\nexport class FpsWidget extends Widget<FpsWidgetProps> {\n  static defaultProps: Required<FpsWidgetProps> = {\n    ...Widget.defaultProps,\n    id: 'fps',\n    placement: 'top-left',\n    viewId: null\n  };\n\n  className = 'deck-widget-fps';\n  placement: WidgetPlacement = 'top-left';\n\n  private _lastFps: number = -1;\n\n  constructor(props: FpsWidgetProps = {}) {\n    super(props);\n    this.setProps(this.props);\n  }\n\n  setProps(props: Partial<FpsWidgetProps>): void {\n    this.placement = props.placement ?? this.placement;\n    this.viewId = props.viewId ?? this.viewId;\n    super.setProps(props);\n  }\n\n  onAdd({}: {deck: Deck<any>; viewId: string | null}): void {\n    this._lastFps = this._getFps();\n    requestAnimationFrame(() => this._animate());\n  }\n\n  onRenderHTML(rootElement: HTMLElement): void {\n    const fps = this._getFps();\n    render(\n      <IconButton>\n        <div className=\"text\">\n          FPS\n          <br />\n          {fps}\n        </div>\n      </IconButton>,\n      rootElement\n    );\n  }\n\n  _animate(): void {\n    const fps = this._getFps();\n    if (this._lastFps !== fps) {\n      this._lastFps = fps;\n      this.updateHTML();\n    }\n    requestAnimationFrame(() => this._animate());\n  }\n\n  _getFps(): number {\n    // @ts-expect-error protected\n    return Math.round(this.deck?.metrics.fps ?? 0);\n  }\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {Widget, type WidgetPlacement, type WidgetProps} from '@deck.gl/core';\nimport {luma} from '@luma.gl/core';\nimport {render} from 'preact';\nimport type {Stats, Stat} from '@probe.gl/stats';\n\nconst RIGHT_ARROW = '\\u25b6';\nconst DOWN_ARROW = '\\u2b07';\n\nconst DEFAULT_COUNT_FORMATTER = (stat: Stat): string => `${stat.name}: ${stat.count}`;\n\nfunction formatTime(time: number): string {\n  return time < 1000 ? `${time.toFixed(2)}ms` : `${(time / 1000).toFixed(2)}s`;\n}\n\nfunction formatMemory(bytes: number): string {\n  const mb = bytes / 1e6;\n  return `${mb.toFixed(1)} MB`;\n}\n\nexport const DEFAULT_FORMATTERS: Record<string, (stat: Stat) => string> = {\n  count: DEFAULT_COUNT_FORMATTER,\n  averageTime: (stat: Stat) => `${stat.name}: ${formatTime(stat.getAverageTime())}`,\n  totalTime: (stat: Stat) => `${stat.name}: ${formatTime(stat.time)}`,\n  fps: (stat: Stat) => `${stat.name}: ${Math.round(stat.getHz())}fps`,\n  memory: (stat: Stat) => `${stat.name}: ${formatMemory(stat.count)}`\n};\n\nexport type StatsWidgetProps = WidgetProps & {\n  /** Widget positioning within the view. Default 'top-left'. */\n  placement?: WidgetPlacement;\n  /** View to attach to and interact with. Required when using multiple views. */\n  viewId?: string | null;\n  /** Type of stats to display. */\n  type?: 'deck' | 'luma' | 'device' | 'custom';\n  /** Stats object to visualize. */\n  stats?: Stats;\n  /** Title shown in the header of the pop-up. Defaults to stats.id. */\n  title?: string;\n  /** How many redraws to wait between updates. */\n  framesPerUpdate?: number;\n  /** Custom formatters for stat values. */\n  formatters?: Record<string, string | ((stat: Stat) => string)>;\n  /** Whether to reset particular stats after each update. */\n  resetOnUpdate?: Record<string, boolean>;\n};\n\n/** Displays probe.gl stats in a floating pop-up. */\nexport class StatsWidget extends Widget<StatsWidgetProps> {\n  static defaultProps: Required<StatsWidgetProps> = {\n    ...Widget.defaultProps,\n    type: 'deck',\n    placement: 'top-left',\n    viewId: null,\n    stats: undefined!,\n    title: 'Stats',\n    framesPerUpdate: 1,\n    formatters: {},\n    resetOnUpdate: {},\n    id: 'stats'\n  };\n\n  className = 'deck-widget-stats';\n  placement = 'top-left' as WidgetPlacement;\n\n  private _counter = 0;\n  private _formatters: Record<string, (stat: Stat) => string>;\n  private _resetOnUpdate: Record<string, boolean>;\n  collapsed: boolean = true;\n  _stats: Stats;\n\n  constructor(props: StatsWidgetProps = {}) {\n    super(props);\n    this._formatters = {...DEFAULT_FORMATTERS};\n    this._resetOnUpdate = {...this.props.resetOnUpdate};\n    this._stats = this.props.stats;\n    this.setProps(props);\n  }\n\n  setProps(props: Partial<StatsWidgetProps>): void {\n    this.placement = props.placement ?? this.placement;\n    this.viewId = props.viewId ?? this.viewId;\n    this._stats = this._getStats();\n    if (props.formatters) {\n      for (const name in props.formatters) {\n        const f = props.formatters[name];\n        this._formatters[name] =\n          typeof f === 'string' ? DEFAULT_FORMATTERS[f] || DEFAULT_COUNT_FORMATTER : f;\n      }\n    }\n    if (props.resetOnUpdate) {\n      this._resetOnUpdate = {...props.resetOnUpdate};\n    }\n    super.setProps(props);\n  }\n\n  onAdd(): void {\n    this._stats = this._getStats();\n    this.updateHTML();\n  }\n\n  onRenderHTML(rootElement: HTMLElement): void {\n    const stats = this._stats;\n    const collapsed = this.collapsed;\n    const title = this.props.title || stats?.id || 'Stats';\n    const items: JSX.Element[] = [];\n\n    if (!collapsed && stats) {\n      stats.forEach(stat => {\n        const lines = this._getLines(stat);\n        if (this._resetOnUpdate && this._resetOnUpdate[stat.name]) {\n          stat.reset();\n        }\n        lines.forEach((line, i) => {\n          items.push(\n            <div key={`${stat.name}-${i}`} style={{whiteSpace: 'pre'}}>\n              {line}\n            </div>\n          );\n        });\n      });\n    }\n\n    render(\n      <div className=\"deck-widget-stats-container\" style={{cursor: 'default'}}>\n        <div\n          className=\"deck-widget-stats-header\"\n          style={{cursor: 'pointer', pointerEvents: 'auto'}}\n          onClick={this._toggleCollapsed}\n        >\n          {collapsed ? RIGHT_ARROW : DOWN_ARROW} {title}\n        </div>\n        {!collapsed && <div className=\"deck-widget-stats-content\">{items}</div>}\n      </div>,\n      rootElement\n    );\n  }\n\n  onRedraw(): void {\n    const framesPerUpdate = Math.max(1, this.props.framesPerUpdate || 1);\n    if (this._counter++ % framesPerUpdate === 0) {\n      this._stats = this._getStats();\n      this.updateHTML();\n    }\n  }\n\n  protected _getStats(): Stats {\n    switch (this.props.type) {\n      case 'deck':\n        // @ts-expect-error stats is protected\n        return this.deck?.stats;\n      case 'luma':\n        return Array.from(luma.stats.stats.values())[0];\n      case 'device':\n        // @ts-expect-error is protected\n        const device = this.deck?.device;\n        const stats = device?.statsManager.stats.values();\n        return stats ? Array.from(stats)[0] : undefined;\n      case 'custom':\n        return this.props.stats;\n      default:\n        throw new Error(`Unknown stats type: ${this.props.type}`);\n    }\n  }\n\n  protected _toggleCollapsed = (): void => {\n    this.collapsed = !this.collapsed;\n    this.updateHTML();\n  };\n\n  protected _getLines(stat: Stat): string[] {\n    const formatter =\n      this._formatters[stat.name] || this._formatters[stat.type || ''] || DEFAULT_COUNT_FORMATTER;\n    return formatter(stat).split('\\n');\n  }\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {useContext, useMemo, useEffect} from 'react';\nimport {DeckGlContext} from './deckgl-context';\nimport {log, Widget, type WidgetProps, _deepEqual as deepEqual} from '@deck.gl/core';\n\nexport function useWidget<WidgetT extends Widget, WidgetPropsT extends WidgetProps>(\n  WidgetClass: {new (props_: WidgetPropsT): WidgetT},\n  props: WidgetPropsT\n): WidgetT {\n  const context = useContext(DeckGlContext);\n  const {widgets, deck} = context;\n  useEffect(() => {\n    // warn if the user supplied a pure-js widget, since it will be ignored\n    // NOTE: This effect runs once per widget. Context widgets and deck widget props are synced after first effect runs.\n    const internalWidgets = deck?.props.widgets;\n    if (widgets?.length && internalWidgets?.length && !deepEqual(internalWidgets, widgets, 1)) {\n      log.warn('\"widgets\" prop will be ignored because React widgets are in use.')();\n    }\n\n    return () => {\n      // Remove widget from context when it is unmounted\n      const index = widgets?.indexOf(widget);\n      if (index && index !== -1) {\n        widgets?.splice(index, 1);\n        deck?.setProps({widgets});\n      }\n    };\n  }, []);\n  const widget = useMemo(() => new WidgetClass(props), [WidgetClass]);\n\n  // Hook rebuilds widgets on every render: [] then [FirstWidget] then [FirstWidget, SecondWidget]\n  widgets?.push(widget);\n  widget.setProps(props);\n\n  useEffect(() => {\n    deck?.setProps({widgets});\n  }, [widgets]);\n\n  return widget;\n}\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {CompassWidget as _CompassWidget} from '@deck.gl/widgets';\nimport type {CompassWidgetProps} from '@deck.gl/widgets';\nimport {useWidget} from '../utils/use-widget';\n\nexport const CompassWidget = (props: CompassWidgetProps = {}) => {\n  useWidget(_CompassWidget, props);\n  return null;\n};\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {FullscreenWidget as _FullscreenWidget} from '@deck.gl/widgets';\nimport type {FullscreenWidgetProps} from '@deck.gl/widgets';\nimport {useWidget} from '../utils/use-widget';\n\nexport const FullscreenWidget = (props: FullscreenWidgetProps = {}) => {\n  useWidget(_FullscreenWidget, props);\n  return null;\n};\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {ZoomWidget as _ZoomWidget} from '@deck.gl/widgets';\nimport type {ZoomWidgetProps} from '@deck.gl/widgets';\nimport {useWidget} from '../utils/use-widget';\n\nexport const ZoomWidget = (props: ZoomWidgetProps = {}) => {\n  useWidget(_ZoomWidget, props);\n  return null;\n};\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {_GeocoderWidget} from '@deck.gl/widgets';\nimport type {GeocoderWidgetProps} from '@deck.gl/widgets';\nimport {useWidget} from '../utils/use-widget';\n\n/**\n * React wrapper for the GeocoderWidget.\n */\nexport const GeocoderWidget = (props: GeocoderWidgetProps = {}) => {\n  useWidget(_GeocoderWidget, props);\n  return null;\n};\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {_InfoWidget} from '@deck.gl/widgets';\nimport type {InfoWidgetProps} from '@deck.gl/widgets';\nimport {useWidget} from '../utils/use-widget';\n\n/**\n * React wrapper for the InfoWidget.\n */\nexport const InfoWidget = (props: InfoWidgetProps) => {\n  useWidget(_InfoWidget, props);\n  return null;\n};\n", "import {_ContextMenuWidget} from '@deck.gl/widgets';\nimport type {ContextMenuWidgetProps} from '@deck.gl/widgets';\nimport {useWidget} from '../utils/use-widget';\n\n/**\n * React wrapper for the ContextMenuWidget.\n */\nexport const ContextMenuWidget = (props: ContextMenuWidgetProps) => {\n  useWidget(_ContextMenuWidget, props);\n  return null;\n};\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {_LoadingWidget} from '@deck.gl/widgets';\nimport type {LoadingWidgetProps} from '@deck.gl/widgets';\nimport {useWidget} from '../utils/use-widget';\n\n/**\n * React wrapper for the LoadingWidget.\n */\nexport const LoadingWidget = (props: LoadingWidgetProps = {}) => {\n  useWidget(_LoadingWidget, props);\n  return null;\n};\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {ResetViewWidget as _ResetViewWidget} from '@deck.gl/widgets';\nimport type {ResetViewWidgetProps} from '@deck.gl/widgets';\nimport {useWidget} from '../utils/use-widget';\n\n/**\n * React wrapper for the ResetViewWidget.\n */\nexport const ResetViewWidget = (props: ResetViewWidgetProps = {}) => {\n  useWidget(_ResetViewWidget, props);\n  return null;\n};\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {_ScaleWidget} from '@deck.gl/widgets';\nimport type {ScaleWidgetProps} from '@deck.gl/widgets';\nimport {useWidget} from '../utils/use-widget';\n\n/**\n * React wrapper for the ScaleWidget.\n */\nexport const ScaleWidget = (props: ScaleWidgetProps = {}) => {\n  useWidget(_ScaleWidget, props);\n  return null;\n};\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {ScreenshotWidget as _ScreenshotWidget} from '@deck.gl/widgets';\nimport type {ScreenshotWidgetProps} from '@deck.gl/widgets';\nimport {useWidget} from '../utils/use-widget';\n\n/**\n * React wrapper for the ScreenshotWidget.\n */\nexport const ScreenshotWidget = (props: ScreenshotWidgetProps = {}) => {\n  useWidget(_ScreenshotWidget, props);\n  return null;\n};\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {_SplitterWidget} from '@deck.gl/widgets';\nimport type {SplitterWidgetProps} from '@deck.gl/widgets';\nimport {useWidget} from '../utils/use-widget';\n\n/**\n * React wrapper for the SplitterWidget.\n */\nexport const SplitterWidget = (props: SplitterWidgetProps) => {\n  useWidget(_SplitterWidget, props);\n  return null;\n};\n", "// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {_ThemeWidget} from '@deck.gl/widgets';\nimport type {ThemeWidgetProps} from '@deck.gl/widgets';\nimport {useWidget} from '../utils/use-widget';\n\n/**\n * React wrapper for the ThemeWidget.\n */\nexport const ThemeWidget = (props: ThemeWidgetProps = {}) => {\n  useWidget(_ThemeWidget, props);\n  return null;\n};\n"],
  "mappings": "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",
  "names": ["React", "import_react", "import_react", "import_react", "import_react", "import_react", "x", "y", "v", "slice", "options", "vnodeId", "isValidElement", "rerenderQueue", "prevDebounce", "defer", "depthSort", "CAPTURE_REGEX", "eventClock", "eventProxy", "eventProxyCapture", "i", "EMPTY_OBJ", "EMPTY_ARR", "IS_NON_DIMENSIONAL", "isArray", "Array", "assign", "obj", "props", "removeNode", "node", "parentNode", "removeChild", "createElement", "type", "children", "key", "ref", "normalizedProps", "arguments", "length", "call", "defaultProps", "createVNode", "original", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "__i", "__u", "Fragment", "props", "children", "BaseComponent", "context", "this", "getDomSibling", "vnode", "childIndex", "__", "__i", "sibling", "__k", "length", "__e", "type", "updateParentDomPointers", "i", "child", "__c", "base", "enqueueRender", "c", "__d", "rerenderQueue", "push", "process", "__r", "prevDebounce", "options", "debounceRendering", "defer", "component", "newVNode", "oldVNode", "oldDom", "commitQueue", "refQueue", "l", "sort", "depthSort", "shift", "__v", "__P", "assign", "diff", "__n", "namespaceURI", "__u", "commitRoot", "diffChildren", "parentDom", "renderResult", "newParentVNode", "oldParentVNode", "globalContext", "namespace", "excessDomChildren", "isHydrating", "childVNode", "newDom", "firstChildDom", "result", "shouldPlace", "oldChildren", "EMPTY_ARR", "newChildrenLength", "constructNewChildrenArray", "EMPTY_OBJ", "ref", "applyRef", "insert", "nextSibling", "skewedIndex", "matchingIndex", "oldChildrenLength", "remainingOldChildren", "skew", "Array", "constructor", "String", "createVNode", "isArray", "__b", "key", "findMatchingIndex", "unmount", "parentVNode", "parentNode", "insertBefore", "nodeType", "findMatchingIndex", "childVNode", "oldChildren", "skewedIndex", "remainingOldChildren", "x", "y", "childIndex", "key", "type", "oldVNode", "matched", "__u", "length", "setStyle", "style", "value", "setProperty", "IS_NON_DIMENSIONAL", "test", "dom", "name", "oldValue", "namespace", "useCapture", "lowerCaseName", "o", "cssText", "replace", "CAPTURE_REGEX", "toLowerCase", "slice", "l", "_attached", "eventClock", "addEventListener", "eventProxyCapture", "eventProxy", "removeEventListener", "e", "removeAttribute", "setAttribute", "createEventProxy", "this", "eventHandler", "_dispatched", "options", "event", "diff", "parentDom", "newVNode", "globalContext", "excessDomChildren", "commitQueue", "oldDom", "isHydrating", "refQueue", "tmp", "c", "isNew", "oldProps", "oldState", "snapshot", "clearProcessingException", "newProps", "isClassComponent", "provider", "componentContext", "i", "renderHook", "count", "renderResult", "newType", "constructor", "__e", "__b", "outer", "props", "prototype", "render", "contextType", "__c", "__", "__E", "BaseComponent", "doRender", "sub", "state", "__n", "__d", "__h", "_sb", "__s", "getDerivedStateFromProps", "assign", "__v", "componentWillMount", "componentDidMount", "push", "componentWillReceiveProps", "shouldComponentUpdate", "__k", "some", "vnode", "componentWillUpdate", "componentDidUpdate", "context", "__P", "__r", "getChildContext", "getSnapshotBeforeUpdate", "Fragment", "cloneNode", "children", "diffChildren", "isArray", "base", "then", "MODE_HYDRATE", "nodeType", "nextSibling", "indexOf", "removeNode", "markAsForce", "diffElementNodes", "diffed", "forEach", "commitRoot", "root", "applyRef", "cb", "call", "node", "map", "newHtml", "oldHtml", "newChildren", "inputValue", "checked", "EMPTY_OBJ", "localName", "document", "createTextNode", "createElementNS", "is", "__m", "data", "childNodes", "attributes", "__html", "innerHTML", "content", "getDomSibling", "undefined", "ref", "hasRefUnmount", "current", "unmount", "parentVNode", "skipRemove", "r", "componentWillUnmount", "replaceNode", "documentElement", "createElement", "namespaceURI", "firstChild", "slice", "EMPTY_ARR", "options", "__e", "error", "vnode", "oldVNode", "errorInfo", "component", "ctor", "handled", "__", "__c", "constructor", "getDerivedStateFromError", "setState", "__d", "componentDidCatch", "__E", "e", "vnodeId", "isValidElement", "BaseComponent", "prototype", "update", "callback", "s", "this", "__s", "state", "assign", "props", "__v", "_sb", "push", "enqueueRender", "forceUpdate", "__h", "render", "Fragment", "rerenderQueue", "defer", "Promise", "then", "bind", "resolve", "setTimeout", "depthSort", "a", "b", "__b", "process", "__r", "CAPTURE_REGEX", "eventClock", "eventProxy", "createEventProxy", "eventProxyCapture", "i", "vnodeId", "isArray", "Array", "createVNode", "type", "props", "key", "isStaticChildren", "__source", "__self", "ref", "i", "normalizedProps", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "__i", "__u", "defaultProps", "options", "u", "u", "u", "u", "u", "u", "u", "u", "i", "currentIndex", "currentComponent", "previousComponent", "prevRaf", "currentHook", "afterPaintEffects", "options", "_options", "oldBeforeDiff", "__b", "oldBeforeRender", "__r", "oldAfterDiff", "diffed", "oldCommit", "__c", "oldBeforeUnmount", "unmount", "oldRoot", "__", "getHookState", "index", "type", "__h", "hooks", "__H", "length", "push", "useState", "initialState", "useReducer", "invokeOrReturn", "reducer", "init", "hookState", "_reducer", "action", "currentValue", "__N", "nextValue", "setState", "__f", "updateHookState", "p", "s", "c", "stateHooks", "filter", "x", "every", "prevScu", "call", "this", "shouldUpdate", "props", "forEach", "hookItem", "shouldComponentUpdate", "prevCWU", "componentWillUpdate", "__e", "tmp", "useEffect", "callback", "args", "state", "__s", "argsChanged", "_pendingArgs", "useRef", "initialValue", "currentHook", "useMemo", "current", "useMemo", "factory", "args", "state", "getHookState", "currentIndex", "argsChanged", "__H", "__", "__h", "flushAfterPaintEffects", "component", "afterPaintEffects", "shift", "__P", "__H", "__h", "forEach", "invokeCleanup", "invokeEffect", "e", "options", "__e", "__v", "__b", "vnode", "currentComponent", "oldBeforeDiff", "__", "parentDom", "__k", "__m", "oldRoot", "__r", "oldBeforeRender", "currentIndex", "hooks", "__c", "previousComponent", "hookItem", "__N", "_pendingArgs", "diffed", "oldAfterDiff", "c", "length", "push", "prevRaf", "requestAnimationFrame", "afterNextFrame", "commitQueue", "some", "filter", "cb", "oldCommit", "unmount", "oldBeforeUnmount", "hasErrored", "s", "HAS_RAF", "callback", "raf", "done", "clearTimeout", "timeout", "cancelAnimationFrame", "setTimeout", "hook", "comp", "cleanup", "argsChanged", "oldArgs", "newArgs", "arg", "index", "invokeOrReturn", "f", "d", "A", "y", "u", "v", "a", "p", "s", "value", "CURRENT_LOCATION", "e", "u", "u", "u", "d", "A", "d", "A", "y", "u", "u", "x", "y", "u", "u", "_", "u", "e", "u", "u", "u", "u", "u", "f", "i", "u", "import_react", "CompassWidget", "FullscreenWidget", "ZoomWidget", "GeocoderWidget", "InfoWidget", "ContextMenuWidget", "LoadingWidget", "ResetViewWidget", "ScaleWidget", "ScreenshotWidget", "SplitterWidget", "ThemeWidget"]
}
